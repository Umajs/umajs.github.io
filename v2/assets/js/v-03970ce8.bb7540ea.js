"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[769],{9990:(s,n,a)=>{a.r(n),a.d(n,{default:()=>i});var l=a(3168);const e=(0,l.uE)('<h1 id="静态资源-static" tabindex="-1"><a class="header-anchor" href="#静态资源-static" aria-hidden="true">#</a> 静态资源（Static）</h1><p>静态资源返回插件</p><h2 id="安装" tabindex="-1"><a class="header-anchor" href="#安装" aria-hidden="true">#</a> 安装</h2><div class="language-bash ext-sh line-numbers-mode"><pre class="shiki" style="background-color:#0d1117;"><code><span class="line"><span style="color:#C9D1D9;">$ npm install -S @umajs/plugin-static</span></span>\n<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><h2 id="开启" tabindex="-1"><a class="header-anchor" href="#开启" aria-hidden="true">#</a> 开启</h2><p>在 plugin.config.ts 中开启 plugin-status 插件</p><div class="language-javascript ext-js line-numbers-mode"><pre class="shiki" style="background-color:#0d1117;"><code><span class="line"><span style="color:#8B949E;">// plugin.config.ts</span></span>\n<span class="line"><span style="color:#FF7B72;">export</span><span style="color:#FFA657;"> </span><span style="color:#FF7B72;">default</span><span style="color:#FFA657;"> {</span></span>\n<span class="line"><span style="color:#FFA657;">    </span><span style="color:#C9D1D9;">static: {</span></span>\n<span class="line"><span style="color:#C9D1D9;">        options: &lt;</span><span style="color:#7EE787;">staticOptions</span><span style="color:#C9D1D9;">&gt;{</span></span>\n<span class="line"><span style="color:#C9D1D9;">            root: </span><span style="color:#A5D6FF;">&#39;./static&#39;</span><span style="color:#C9D1D9;">,</span></span>\n<span class="line"><span style="color:#C9D1D9;">            opts: {</span></span>\n<span class="line"><span style="color:#C9D1D9;">            },</span></span>\n<span class="line"><span style="color:#C9D1D9;">        }</span></span>\n<span class="line"><span style="color:#C9D1D9;">    }</span></span>\n<span class="line"><span style="color:#C9D1D9;">}</span></span>\n<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div>',7),p=(0,l.Uk)("具体开启方式请参考"),o=(0,l.Uk)("plugin"),t=(0,l.Uk)("一节中的配置方式"),r=(0,l.uE)('<h3 id="options-root" tabindex="-1"><a class="header-anchor" href="#options-root" aria-hidden="true">#</a> options.root</h3><p>静态资源的根路径</p><h3 id="options-opts" tabindex="-1"><a class="header-anchor" href="#options-opts" aria-hidden="true">#</a> options.opts</h3><p>静态资源插件配置</p><div class="language-javascript ext-js line-numbers-mode"><pre class="shiki" style="background-color:#0d1117;"><code><span class="line"><span style="color:#FF7B72;">type</span><span style="color:#C9D1D9;"> </span><span style="color:#FFA657;">staticOptions</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> {</span></span>\n<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#8B949E;">/** If true, serves after return next(), allowing any downstream middleware to respond first. */</span></span>\n<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#FFA657;">defer</span><span style="color:#FF7B72;">?:</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">boolean</span><span style="color:#C9D1D9;">,</span></span>\n<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#8B949E;">/** Browser cache max-age in milliseconds. (defaults to 0) */</span></span>\n<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#FFA657;">maxage</span><span style="color:#FF7B72;">?:</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">number</span><span style="color:#C9D1D9;">,</span></span>\n<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#FFA657;">maxAge</span><span style="color:#FF7B72;">?:</span><span style="color:#C9D1D9;"> </span><span style="color:#FFA657;">SendOptions</span><span style="color:#C9D1D9;">[</span><span style="color:#A5D6FF;">&#39;maxage&#39;</span><span style="color:#C9D1D9;">],</span></span>\n<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#8B949E;">/** Tell the browser the resource is immutable and can be cached indefinitely. (defaults to false) */</span></span>\n<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#FFA657;">immutable</span><span style="color:#FF7B72;">?:</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">boolean</span><span style="color:#C9D1D9;">,</span></span>\n<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#8B949E;">/** Allow transfer of hidden files. (defaults to false) */</span></span>\n<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#FFA657;">hidden</span><span style="color:#FF7B72;">?:</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">boolean</span><span style="color:#C9D1D9;">,</span></span>\n<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#8B949E;">/** Root directory to restrict file access. (defaults to &#39;&#39;) */</span></span>\n<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#FFA657;">root</span><span style="color:#FF7B72;">?:</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">string</span><span style="color:#C9D1D9;">,</span></span>\n<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#8B949E;">/** Name of the index file to serve automatically when visiting the root location. (defaults to none) */</span></span>\n<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#FFA657;">index</span><span style="color:#FF7B72;">?:</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">string</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">|</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">false</span><span style="color:#C9D1D9;">,</span></span>\n<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#8B949E;">/** Try to serve the gzipped version of a file automatically when gzip is supported by a client and if the requested file with .gz extension exists. (defaults to true). */</span></span>\n<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#FFA657;">gzip</span><span style="color:#FF7B72;">?:</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">boolean</span><span style="color:#C9D1D9;">,</span></span>\n<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#8B949E;">/** Try to serve the brotli version of a file automatically when brotli is supported by a client and if the requested file with .br extension exists. (defaults to true). */</span></span>\n<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#FFA657;">brotli</span><span style="color:#FF7B72;">?:</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">boolean</span><span style="color:#C9D1D9;">,</span></span>\n<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#8B949E;">/** If not false (defaults to true), format the path to serve static file servers and not require a trailing slash for directories, so that you can do both /directory and /directory/. */</span></span>\n<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#FFA657;">format</span><span style="color:#FF7B72;">?:</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">boolean</span><span style="color:#C9D1D9;">,</span></span>\n<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#8B949E;">/** Function to set custom headers on response. */</span></span>\n<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#FFA657;">setHeaders</span><span style="color:#FF7B72;">?:</span><span style="color:#C9D1D9;"> </span><span style="color:#FFA657;">SetHeaders</span><span style="color:#C9D1D9;">,</span></span>\n<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#8B949E;">/** Try to match extensions from passed array to search for file when no extension is sufficed in URL. First found is served. (defaults to false) */</span></span>\n<span class="line"><span style="color:#C9D1D9;">  </span><span style="color:#FFA657;">extensions</span><span style="color:#FF7B72;">?:</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">string</span><span style="color:#C9D1D9;">[] </span><span style="color:#FF7B72;">|</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">false</span><span style="color:#C9D1D9;">,</span></span>\n<span class="line"><span style="color:#C9D1D9;">}</span></span>\n<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div>',5),c={},i=(0,a(6215).Z)(c,[["render",function(s,n){const a=(0,l.up)("RouterLink");return(0,l.wg)(),(0,l.iD)(l.HY,null,[e,(0,l._)("blockquote",null,[(0,l._)("p",null,[p,(0,l.Wm)(a,{to:"/development/Plugin.html"},{default:(0,l.w5)((()=>[o])),_:1}),t])]),r],64)}]])},4498:(s,n,a)=>{a.r(n),a.d(n,{data:()=>l});const l={key:"v-03970ce8",path:"/plugin/Static.html",title:"静态资源（Static）",lang:"zh-CN",frontmatter:{head:[["meta",{property:"og:url",content:"/v2/plugin/Static.html"}],["meta",{property:"og:site_name",content:"UMajs"}],["meta",{property:"og:title",content:"静态资源（Static）"}],["meta",{property:"og:type",content:"article"}],["meta",{property:"og:locale",content:"zh-CN"}],["meta",{property:"og:locale:alternate",content:"en-US"}],["meta",{name:"twitter:card",content:"summary_large_image"}],["meta",{name:"twitter:image:alt",content:"UMajs"}],["meta",{property:"article:author",content:"wuba"}],["meta",{property:"og:restrictions:age",content:"3+"}]]},excerpt:"",headers:[{level:2,title:"安装",slug:"安装",children:[]},{level:2,title:"开启",slug:"开启",children:[{level:3,title:"options.root",slug:"options-root",children:[]},{level:3,title:"options.opts",slug:"options-opts",children:[]}]}],filePathRelative:"plugin/Static.md",git:{updatedTime:1634816476e3,contributors:[{name:"BubbleM",email:"bubblelm@163.com",commits:1}]}}},6215:(s,n)=>{n.Z=(s,n)=>{for(const[a,l]of n)s[a]=l;return s}}}]);