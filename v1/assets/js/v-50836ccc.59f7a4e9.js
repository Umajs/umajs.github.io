"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[843],{4627:(l,s,n)=>{n.r(s),n.d(s,{default:()=>Fl});var e=n(4386),o=n(1948),a=n(9792),r=n(8743);const _=(0,e._)("h1",{id:"日志-logger",tabindex:"-1"},[(0,e._)("a",{class:"header-anchor",href:"#日志-logger","aria-hidden":"true"},"#"),(0,e.Uk)(" 日志（Logger）")],-1),c=(0,e._)("h2",{id:"日志",tabindex:"-1"},[(0,e._)("a",{class:"header-anchor",href:"#日志","aria-hidden":"true"},"#"),(0,e.Uk)(" 日志")],-1),p=(0,e._)("p",null,[(0,e.Uk)("日志对于 Web 项目的运行状态、问题排查等都非常重要。框架的"),(0,e._)("code",null,"@umajs/logger"),(0,e.Uk)("模块提供日志支持。并且提供"),(0,e._)("code",null,"@umajs/plugin-logger"),(0,e.Uk)("模块，以插件的机制将 logger 实例绑定在 ctx 上，方便用户使用。")],-1),t=(0,e._)("p",null,"主要特性：",-1),i=(0,e._)("ul",null,[(0,e._)("li",null,"日志分级"),(0,e._)("li",null,"统一错误日志，所有 logger 中使用 .error() 打印的 ERROR 级别日志都会打印到统一的错误日志文件中，便于追踪"),(0,e._)("li",null,"自定义日志"),(0,e._)("li",null,"自动切割日志")],-1),D=(0,e._)("h2",{id:"使用plugin-logger",tabindex:"-1"},[(0,e._)("a",{class:"header-anchor",href:"#使用plugin-logger","aria-hidden":"true"},"#"),(0,e.Uk)(" 使用"),(0,e._)("code",null,"plugin-logger")],-1),y=(0,e._)("ul",null,[(0,e._)("li",null,[(0,e.Uk)("安装插件 "),(0,e._)("code",null,"npm install -S @umajs/plugin-logger")]),(0,e._)("li",null,"插件配置：")],-1),F=(0,e._)("div",{class:"language-javascript ext-js line-numbers-mode"},[(0,e._)("pre",{class:"shiki",style:{"background-color":"#0d1117"}},[(0,e._)("code",null,[(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#8B949E"}},"//app/src/config/default/plugin.config.ts")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#FF7B72"}},"import"),(0,e._)("span",{style:{color:"#C9D1D9"}}," "),(0,e._)("span",{style:{color:"#79C0FF"}},"*"),(0,e._)("span",{style:{color:"#C9D1D9"}}," "),(0,e._)("span",{style:{color:"#FF7B72"}},"as"),(0,e._)("span",{style:{color:"#C9D1D9"}}," path "),(0,e._)("span",{style:{color:"#FF7B72"}},"from"),(0,e._)("span",{style:{color:"#C9D1D9"}}," "),(0,e._)("span",{style:{color:"#A5D6FF"}},"'path'")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"}),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#FF7B72"}},"const"),(0,e._)("span",{style:{color:"#C9D1D9"}}," { "),(0,e._)("span",{style:{color:"#79C0FF"}},"ROOT"),(0,e._)("span",{style:{color:"#C9D1D9"}}," } "),(0,e._)("span",{style:{color:"#FF7B72"}},"="),(0,e._)("span",{style:{color:"#C9D1D9"}}," Uma.options")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"}),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#FF7B72"}},"export"),(0,e._)("span",{style:{color:"#FFA657"}}," "),(0,e._)("span",{style:{color:"#FF7B72"}},"default"),(0,e._)("span",{style:{color:"#FFA657"}}," {")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#FFA657"}},"  "),(0,e._)("span",{style:{color:"#C9D1D9"}},"logger: {")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#C9D1D9"}},"    enable: "),(0,e._)("span",{style:{color:"#79C0FF"}},"true"),(0,e._)("span",{style:{color:"#C9D1D9"}},",")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#C9D1D9"}},"    options: {")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#C9D1D9"}},"      level: "),(0,e._)("span",{style:{color:"#A5D6FF"}},"'DEBUG'"),(0,e._)("span",{style:{color:"#C9D1D9"}},", "),(0,e._)("span",{style:{color:"#8B949E"}},"//日志输出级别")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#C9D1D9"}},"      file: path."),(0,e._)("span",{style:{color:"#D2A8FF"}},"resolve"),(0,e._)("span",{style:{color:"#C9D1D9"}},"("),(0,e._)("span",{style:{color:"#79C0FF"}},"ROOT"),(0,e._)("span",{style:{color:"#C9D1D9"}},", "),(0,e._)("span",{style:{color:"#A5D6FF"}},"'../log/logger.log'"),(0,e._)("span",{style:{color:"#C9D1D9"}},"),")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#C9D1D9"}},"      allowDebugAtProd: "),(0,e._)("span",{style:{color:"#79C0FF"}},"false"),(0,e._)("span",{style:{color:"#C9D1D9"}},", "),(0,e._)("span",{style:{color:"#8B949E"}},"// 是否允许打印debug日志")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#C9D1D9"}},"    },")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#C9D1D9"}},"  }"),(0,e._)("span",{style:{color:"#FFA657"}},",")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#FFA657"}},"}")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"})])]),(0,e._)("div",{class:"line-numbers"},[(0,e._)("span",{class:"line-number"},"1"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"2"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"3"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"4"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"5"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"6"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"7"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"8"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"9"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"10"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"11"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"12"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"13"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"14"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"15"),(0,e._)("br")])],-1),u=(0,e._)("ul",null,[(0,e._)("li",null,"在 Controller 中使用 logger")],-1),g=(0,e._)("p",null,[(0,e._)("code",null,"plugin-logger"),(0,e.Uk)("插件将 logger 实例绑定在 ctx 上，因此可在项目中使用"),(0,e._)("code",null,"this.ctx.logger"),(0,e.Uk)("使用；")],-1),b=(0,e._)("div",{class:"language-javascript ext-js line-numbers-mode"},[(0,e._)("pre",{class:"shiki",style:{"background-color":"#0d1117"}},[(0,e._)("code",null,[(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#8B949E"}},"// app/src/controller/index.controller.ts")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#FF7B72"}},"export"),(0,e._)("span",{style:{color:"#FFA657"}}," "),(0,e._)("span",{style:{color:"#FF7B72"}},"default"),(0,e._)("span",{style:{color:"#FFA657"}}," "),(0,e._)("span",{style:{color:"#FF7B72"}},"class"),(0,e._)("span",{style:{color:"#FFA657"}}," Index "),(0,e._)("span",{style:{color:"#FF7B72"}},"extends"),(0,e._)("span",{style:{color:"#FFA657"}}," "),(0,e._)("span",{style:{color:"#79C0FF"}},"BaseController"),(0,e._)("span",{style:{color:"#FFA657"}}," {")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#FFA657"}},"  @"),(0,e._)("span",{style:{color:"#D2A8FF"}},"Path"),(0,e._)("span",{style:{color:"#FFA657"}},"("),(0,e._)("span",{style:{color:"#A5D6FF"}},"'/index'"),(0,e._)("span",{style:{color:"#FFA657"}},")")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#FFA657"}},"  @"),(0,e._)("span",{style:{color:"#D2A8FF"}},"RequestMethod"),(0,e._)("span",{style:{color:"#FFA657"}},"("),(0,e._)("span",{style:{color:"#A5D6FF"}},"'GET'"),(0,e._)("span",{style:{color:"#FFA657"}},")")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#FFA657"}},"  "),(0,e._)("span",{style:{color:"#D2A8FF"}},"index"),(0,e._)("span",{style:{color:"#FFA657"}},"() "),(0,e._)("span",{style:{color:"#C9D1D9"}},"{")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#C9D1D9"}},"    "),(0,e._)("span",{style:{color:"#79C0FF"}},"this"),(0,e._)("span",{style:{color:"#C9D1D9"}},".ctx.logger."),(0,e._)("span",{style:{color:"#D2A8FF"}},"info"),(0,e._)("span",{style:{color:"#C9D1D9"}},"("),(0,e._)("span",{style:{color:"#79C0FF"}},"this"),(0,e._)("span",{style:{color:"#C9D1D9"}},".testService."),(0,e._)("span",{style:{color:"#D2A8FF"}},"return1"),(0,e._)("span",{style:{color:"#C9D1D9"}},"())")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#C9D1D9"}},"    "),(0,e._)("span",{style:{color:"#79C0FF"}},"this"),(0,e._)("span",{style:{color:"#C9D1D9"}},".ctx.logger."),(0,e._)("span",{style:{color:"#D2A8FF"}},"debug"),(0,e._)("span",{style:{color:"#C9D1D9"}},"("),(0,e._)("span",{style:{color:"#A5D6FF"}},"'debug'"),(0,e._)("span",{style:{color:"#C9D1D9"}},")")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#C9D1D9"}},"    "),(0,e._)("span",{style:{color:"#79C0FF"}},"this"),(0,e._)("span",{style:{color:"#C9D1D9"}},".ctx.logger."),(0,e._)("span",{style:{color:"#D2A8FF"}},"warn"),(0,e._)("span",{style:{color:"#C9D1D9"}},"("),(0,e._)("span",{style:{color:"#A5D6FF"}},"'warn'"),(0,e._)("span",{style:{color:"#C9D1D9"}},")")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#C9D1D9"}},"    "),(0,e._)("span",{style:{color:"#79C0FF"}},"this"),(0,e._)("span",{style:{color:"#C9D1D9"}},".ctx.logger."),(0,e._)("span",{style:{color:"#D2A8FF"}},"error"),(0,e._)("span",{style:{color:"#C9D1D9"}},"("),(0,e._)("span",{style:{color:"#A5D6FF"}},"'error'"),(0,e._)("span",{style:{color:"#C9D1D9"}},")")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#C9D1D9"}},"    "),(0,e._)("span",{style:{color:"#FF7B72"}},"return"),(0,e._)("span",{style:{color:"#C9D1D9"}}," "),(0,e._)("span",{style:{color:"#79C0FF"}},"this"),(0,e._)("span",{style:{color:"#C9D1D9"}},"."),(0,e._)("span",{style:{color:"#D2A8FF"}},"send"),(0,e._)("span",{style:{color:"#C9D1D9"}},"("),(0,e._)("span",{style:{color:"#A5D6FF"}},"'这里是首页'"),(0,e._)("span",{style:{color:"#C9D1D9"}},")")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#C9D1D9"}},"  }")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#FFA657"}},"}")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"})])]),(0,e._)("div",{class:"line-numbers"},[(0,e._)("span",{class:"line-number"},"1"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"2"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"3"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"4"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"5"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"6"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"7"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"8"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"9"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"10"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"11"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"12"),(0,e._)("br")])],-1),C=(0,e._)("ul",null,[(0,e._)("li",null,"在 Service 中使用 logger 【 v0.0.5 版本后支持】")],-1),m=(0,e._)("p",null,[(0,e._)("code",null,"plugin-logger"),(0,e.Uk)("绑定到 ctx 上的 logger 实例可通过"),(0,e._)("code",null,"UmaLogger.instance()"),(0,e.Uk)("获取")],-1),d=(0,e._)("div",{class:"language-javascript ext-js line-numbers-mode"},[(0,e._)("pre",{class:"shiki",style:{"background-color":"#0d1117"}},[(0,e._)("code",null,[(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#8B949E"}},"// app/src/service/test.service.ts")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#FF7B72"}},"import"),(0,e._)("span",{style:{color:"#C9D1D9"}}," { BaseService } "),(0,e._)("span",{style:{color:"#FF7B72"}},"from"),(0,e._)("span",{style:{color:"#C9D1D9"}}," "),(0,e._)("span",{style:{color:"#A5D6FF"}},"'@umajs/core'")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#FF7B72"}},"import"),(0,e._)("span",{style:{color:"#C9D1D9"}}," { UmaLogger } "),(0,e._)("span",{style:{color:"#FF7B72"}},"from"),(0,e._)("span",{style:{color:"#C9D1D9"}}," "),(0,e._)("span",{style:{color:"#A5D6FF"}},"'@umajs/logger'")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"}),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#FF7B72"}},"export"),(0,e._)("span",{style:{color:"#FFA657"}}," "),(0,e._)("span",{style:{color:"#FF7B72"}},"default"),(0,e._)("span",{style:{color:"#FFA657"}}," "),(0,e._)("span",{style:{color:"#FF7B72"}},"class"),(0,e._)("span",{style:{color:"#FFA657"}}," test "),(0,e._)("span",{style:{color:"#FF7B72"}},"extends"),(0,e._)("span",{style:{color:"#FFA657"}}," "),(0,e._)("span",{style:{color:"#79C0FF"}},"BaseService"),(0,e._)("span",{style:{color:"#FFA657"}}," {")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#FFA657"}},"  "),(0,e._)("span",{style:{color:"#D2A8FF"}},"return1"),(0,e._)("span",{style:{color:"#FFA657"}},"() "),(0,e._)("span",{style:{color:"#C9D1D9"}},"{")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#C9D1D9"}},"    UmaLogger."),(0,e._)("span",{style:{color:"#D2A8FF"}},"instance"),(0,e._)("span",{style:{color:"#C9D1D9"}},"()."),(0,e._)("span",{style:{color:"#D2A8FF"}},"info"),(0,e._)("span",{style:{color:"#C9D1D9"}},"("),(0,e._)("span",{style:{color:"#A5D6FF"}},"'service test'"),(0,e._)("span",{style:{color:"#C9D1D9"}},")")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#C9D1D9"}},"    "),(0,e._)("span",{style:{color:"#FF7B72"}},"return"),(0,e._)("span",{style:{color:"#C9D1D9"}}," "),(0,e._)("span",{style:{color:"#79C0FF"}},"1")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#C9D1D9"}},"  }")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#FFA657"}},"}")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#8B949E"}},"// [INFO 51449] 2020-04-10 18:42:21,179 bogon [::1/GET /]: service test")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"})])]),(0,e._)("div",{class:"line-numbers"},[(0,e._)("span",{class:"line-number"},"1"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"2"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"3"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"4"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"5"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"6"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"7"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"8"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"9"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"10"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"11"),(0,e._)("br")])],-1),k=(0,e._)("h2",{id:"使用-umalogger",tabindex:"-1"},[(0,e._)("a",{class:"header-anchor",href:"#使用-umalogger","aria-hidden":"true"},"#"),(0,e.Uk)(" 使用 UmaLogger")],-1),U=(0,e._)("p",null,[(0,e._)("code",null,"UmaLogger"),(0,e.Uk)("可单独使用，具体提供如下几种使用方式：")],-1),A=(0,e._)("ol",null,[(0,e._)("li",null,[(0,e.Uk)("通过 "),(0,e._)("code",null,"new UmaLogger()"),(0,e.Uk)(" 独立创建日志实例")])],-1),h=(0,e._)("div",{class:"language-javascript ext-js line-numbers-mode"},[(0,e._)("pre",{class:"shiki",style:{"background-color":"#0d1117"}},[(0,e._)("code",null,[(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#8B949E"}},"// app/src/controller/index.controller.ts")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#FF7B72"}},"import"),(0,e._)("span",{style:{color:"#C9D1D9"}}," { UmaLogger } "),(0,e._)("span",{style:{color:"#FF7B72"}},"from"),(0,e._)("span",{style:{color:"#C9D1D9"}}," "),(0,e._)("span",{style:{color:"#A5D6FF"}},"'@umajs/logger'")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#FF7B72"}},"import"),(0,e._)("span",{style:{color:"#C9D1D9"}}," "),(0,e._)("span",{style:{color:"#79C0FF"}},"*"),(0,e._)("span",{style:{color:"#C9D1D9"}}," "),(0,e._)("span",{style:{color:"#FF7B72"}},"as"),(0,e._)("span",{style:{color:"#C9D1D9"}}," path "),(0,e._)("span",{style:{color:"#FF7B72"}},"from"),(0,e._)("span",{style:{color:"#C9D1D9"}}," "),(0,e._)("span",{style:{color:"#A5D6FF"}},"'path'")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"}),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#FF7B72"}},"const"),(0,e._)("span",{style:{color:"#C9D1D9"}}," "),(0,e._)("span",{style:{color:"#79C0FF"}},"logger"),(0,e._)("span",{style:{color:"#C9D1D9"}}," "),(0,e._)("span",{style:{color:"#FF7B72"}},"="),(0,e._)("span",{style:{color:"#C9D1D9"}}," "),(0,e._)("span",{style:{color:"#FF7B72"}},"new"),(0,e._)("span",{style:{color:"#C9D1D9"}}," "),(0,e._)("span",{style:{color:"#D2A8FF"}},"UmaLogger"),(0,e._)("span",{style:{color:"#C9D1D9"}},"({")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#C9D1D9"}},"  level: "),(0,e._)("span",{style:{color:"#A5D6FF"}},"'ALL'"),(0,e._)("span",{style:{color:"#C9D1D9"}},",")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#C9D1D9"}},"  consoleLevel: "),(0,e._)("span",{style:{color:"#A5D6FF"}},"'ALL'"),(0,e._)("span",{style:{color:"#C9D1D9"}},",")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#C9D1D9"}},"  encoding: "),(0,e._)("span",{style:{color:"#A5D6FF"}},"'utf-8'"),(0,e._)("span",{style:{color:"#C9D1D9"}},",")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#C9D1D9"}},"  file: path."),(0,e._)("span",{style:{color:"#D2A8FF"}},"resolve"),(0,e._)("span",{style:{color:"#C9D1D9"}},"(__dirname, "),(0,e._)("span",{style:{color:"#A5D6FF"}},"'../log/logger.log'"),(0,e._)("span",{style:{color:"#C9D1D9"}},"),")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#C9D1D9"}},"})")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#C9D1D9"}},"logger."),(0,e._)("span",{style:{color:"#D2A8FF"}},"debug"),(0,e._)("span",{style:{color:"#C9D1D9"}},"("),(0,e._)("span",{style:{color:"#A5D6FF"}},"'debug'"),(0,e._)("span",{style:{color:"#C9D1D9"}},")")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#C9D1D9"}},"logger."),(0,e._)("span",{style:{color:"#D2A8FF"}},"info"),(0,e._)("span",{style:{color:"#C9D1D9"}},"("),(0,e._)("span",{style:{color:"#A5D6FF"}},"'info GET'"),(0,e._)("span",{style:{color:"#C9D1D9"}},")")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#C9D1D9"}},"logger."),(0,e._)("span",{style:{color:"#D2A8FF"}},"warn"),(0,e._)("span",{style:{color:"#C9D1D9"}},"("),(0,e._)("span",{style:{color:"#A5D6FF"}},"'warn'"),(0,e._)("span",{style:{color:"#C9D1D9"}},")")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#C9D1D9"}},"logger."),(0,e._)("span",{style:{color:"#D2A8FF"}},"error"),(0,e._)("span",{style:{color:"#C9D1D9"}},"("),(0,e._)("span",{style:{color:"#A5D6FF"}},"'error'"),(0,e._)("span",{style:{color:"#C9D1D9"}},")")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"})])]),(0,e._)("div",{class:"line-numbers"},[(0,e._)("span",{class:"line-number"},"1"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"2"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"3"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"4"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"5"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"6"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"7"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"8"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"9"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"10"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"11"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"12"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"13"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"14"),(0,e._)("br")])],-1),f=(0,e._)("ol",{start:"2"},[(0,e._)("li",null,[(0,e.Uk)("直接使用 "),(0,e._)("code",null,"@umajs/logger"),(0,e.Uk)(" 模块默认导出的实例 【 v0.0.5 版本后支持】")])],-1),B=(0,e._)("div",{class:"language-javascript ext-js line-numbers-mode"},[(0,e._)("pre",{class:"shiki",style:{"background-color":"#0d1117"}},[(0,e._)("code",null,[(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#FF7B72"}},"const"),(0,e._)("span",{style:{color:"#C9D1D9"}}," "),(0,e._)("span",{style:{color:"#79C0FF"}},"logger"),(0,e._)("span",{style:{color:"#C9D1D9"}}," "),(0,e._)("span",{style:{color:"#FF7B72"}},"="),(0,e._)("span",{style:{color:"#C9D1D9"}}," "),(0,e._)("span",{style:{color:"#79C0FF"}},"require"),(0,e._)("span",{style:{color:"#C9D1D9"}},"("),(0,e._)("span",{style:{color:"#A5D6FF"}},"'@umajs/logger'"),(0,e._)("span",{style:{color:"#C9D1D9"}},")")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#C9D1D9"}},"logger."),(0,e._)("span",{style:{color:"#D2A8FF"}},"init"),(0,e._)("span",{style:{color:"#C9D1D9"}},"({")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#C9D1D9"}},"  level: "),(0,e._)("span",{style:{color:"#A5D6FF"}},"'ALL'"),(0,e._)("span",{style:{color:"#C9D1D9"}},",")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#C9D1D9"}},"  consoleLevel: "),(0,e._)("span",{style:{color:"#A5D6FF"}},"'ALL'"),(0,e._)("span",{style:{color:"#C9D1D9"}},",")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#C9D1D9"}},"  encoding: "),(0,e._)("span",{style:{color:"#A5D6FF"}},"'utf-8'"),(0,e._)("span",{style:{color:"#C9D1D9"}},",")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#C9D1D9"}},"  file: path."),(0,e._)("span",{style:{color:"#D2A8FF"}},"resolve"),(0,e._)("span",{style:{color:"#C9D1D9"}},"(__dirname, "),(0,e._)("span",{style:{color:"#A5D6FF"}},"'../log/logger.log'"),(0,e._)("span",{style:{color:"#C9D1D9"}},"),")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#C9D1D9"}},"})")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#C9D1D9"}},"logger."),(0,e._)("span",{style:{color:"#D2A8FF"}},"debug"),(0,e._)("span",{style:{color:"#C9D1D9"}},"("),(0,e._)("span",{style:{color:"#A5D6FF"}},"'debug'"),(0,e._)("span",{style:{color:"#C9D1D9"}},")")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#C9D1D9"}},"logger."),(0,e._)("span",{style:{color:"#D2A8FF"}},"info"),(0,e._)("span",{style:{color:"#C9D1D9"}},"("),(0,e._)("span",{style:{color:"#A5D6FF"}},"'info GET'"),(0,e._)("span",{style:{color:"#C9D1D9"}},")")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#C9D1D9"}},"logger."),(0,e._)("span",{style:{color:"#D2A8FF"}},"warn"),(0,e._)("span",{style:{color:"#C9D1D9"}},"("),(0,e._)("span",{style:{color:"#A5D6FF"}},"'warn'"),(0,e._)("span",{style:{color:"#C9D1D9"}},")")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#C9D1D9"}},"logger."),(0,e._)("span",{style:{color:"#D2A8FF"}},"error"),(0,e._)("span",{style:{color:"#C9D1D9"}},"("),(0,e._)("span",{style:{color:"#A5D6FF"}},"'error'"),(0,e._)("span",{style:{color:"#C9D1D9"}},")")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"})])]),(0,e._)("div",{class:"line-numbers"},[(0,e._)("span",{class:"line-number"},"1"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"2"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"3"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"4"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"5"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"6"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"7"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"8"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"9"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"10"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"11"),(0,e._)("br")])],-1),v=(0,e._)("ol",{start:"3"},[(0,e._)("li",null,"通过单例模式使用 logger 【 v0.0.5 版本后支持】")],-1),x=(0,e._)("p",null,[(0,e.Uk)("只需传入一次参数，其他地方可直接使用 "),(0,e._)("code",null,"UmaLogger.instance()"),(0,e.Uk)(" 获取实例化后日志对象")],-1),L=(0,e._)("div",{class:"language-javascript ext-js line-numbers-mode"},[(0,e._)("pre",{class:"shiki",style:{"background-color":"#0d1117"}},[(0,e._)("code",null,[(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#8B949E"}},"// app/src/controller/index.controller.ts")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#FF7B72"}},"import"),(0,e._)("span",{style:{color:"#C9D1D9"}}," { UmaLogger } "),(0,e._)("span",{style:{color:"#FF7B72"}},"from"),(0,e._)("span",{style:{color:"#C9D1D9"}}," "),(0,e._)("span",{style:{color:"#A5D6FF"}},"'@umajs/logger'")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#FF7B72"}},"import"),(0,e._)("span",{style:{color:"#C9D1D9"}}," "),(0,e._)("span",{style:{color:"#79C0FF"}},"*"),(0,e._)("span",{style:{color:"#C9D1D9"}}," "),(0,e._)("span",{style:{color:"#FF7B72"}},"as"),(0,e._)("span",{style:{color:"#C9D1D9"}}," path "),(0,e._)("span",{style:{color:"#FF7B72"}},"from"),(0,e._)("span",{style:{color:"#C9D1D9"}}," "),(0,e._)("span",{style:{color:"#A5D6FF"}},"'path'")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"}),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#FF7B72"}},"const"),(0,e._)("span",{style:{color:"#C9D1D9"}}," "),(0,e._)("span",{style:{color:"#79C0FF"}},"logger"),(0,e._)("span",{style:{color:"#C9D1D9"}}," "),(0,e._)("span",{style:{color:"#FF7B72"}},"="),(0,e._)("span",{style:{color:"#C9D1D9"}}," UmaLogger."),(0,e._)("span",{style:{color:"#D2A8FF"}},"instance"),(0,e._)("span",{style:{color:"#C9D1D9"}},"({")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#C9D1D9"}},"  level: "),(0,e._)("span",{style:{color:"#A5D6FF"}},"'ALL'"),(0,e._)("span",{style:{color:"#C9D1D9"}},",")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#C9D1D9"}},"  consoleLevel: "),(0,e._)("span",{style:{color:"#A5D6FF"}},"'ALL'"),(0,e._)("span",{style:{color:"#C9D1D9"}},",")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#C9D1D9"}},"  encoding: "),(0,e._)("span",{style:{color:"#A5D6FF"}},"'utf-8'"),(0,e._)("span",{style:{color:"#C9D1D9"}},",")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#C9D1D9"}},"  file: path."),(0,e._)("span",{style:{color:"#D2A8FF"}},"resolve"),(0,e._)("span",{style:{color:"#C9D1D9"}},"(__dirname, "),(0,e._)("span",{style:{color:"#A5D6FF"}},"'../log/logger.log'"),(0,e._)("span",{style:{color:"#C9D1D9"}},"),")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#C9D1D9"}},"})")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#C9D1D9"}},"logger."),(0,e._)("span",{style:{color:"#D2A8FF"}},"debug"),(0,e._)("span",{style:{color:"#C9D1D9"}},"("),(0,e._)("span",{style:{color:"#A5D6FF"}},"'debug'"),(0,e._)("span",{style:{color:"#C9D1D9"}},")")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#C9D1D9"}},"logger."),(0,e._)("span",{style:{color:"#D2A8FF"}},"info"),(0,e._)("span",{style:{color:"#C9D1D9"}},"("),(0,e._)("span",{style:{color:"#A5D6FF"}},"'info GET'"),(0,e._)("span",{style:{color:"#C9D1D9"}},")")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#C9D1D9"}},"logger."),(0,e._)("span",{style:{color:"#D2A8FF"}},"warn"),(0,e._)("span",{style:{color:"#C9D1D9"}},"("),(0,e._)("span",{style:{color:"#A5D6FF"}},"'warn'"),(0,e._)("span",{style:{color:"#C9D1D9"}},")")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#C9D1D9"}},"logger."),(0,e._)("span",{style:{color:"#D2A8FF"}},"error"),(0,e._)("span",{style:{color:"#C9D1D9"}},"("),(0,e._)("span",{style:{color:"#A5D6FF"}},"'error'"),(0,e._)("span",{style:{color:"#C9D1D9"}},")")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"})])]),(0,e._)("div",{class:"line-numbers"},[(0,e._)("span",{class:"line-number"},"1"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"2"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"3"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"4"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"5"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"6"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"7"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"8"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"9"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"10"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"11"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"12"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"13"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"14"),(0,e._)("br")])],-1),E=(0,e._)("h2",{id:"日志配置",tabindex:"-1"},[(0,e._)("a",{class:"header-anchor",href:"#日志配置","aria-hidden":"true"},"#"),(0,e.Uk)(" 日志配置")],-1),j=(0,e._)("div",{class:"language-javascript ext-js line-numbers-mode"},[(0,e._)("pre",{class:"shiki",style:{"background-color":"#0d1117"}},[(0,e._)("code",null,[(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#79C0FF"}},"exports"),(0,e._)("span",{style:{color:"#C9D1D9"}},".logger "),(0,e._)("span",{style:{color:"#FF7B72"}},"="),(0,e._)("span",{style:{color:"#C9D1D9"}}," {")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#C9D1D9"}},"  level: "),(0,e._)("span",{style:{color:"#A5D6FF"}},"'DEBUG'"),(0,e._)("span",{style:{color:"#C9D1D9"}},", "),(0,e._)("span",{style:{color:"#8B949E"}},"//日志输出级别")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#C9D1D9"}},"  dir: "),(0,e._)("span",{style:{color:"#A5D6FF"}},"'/path/to/your/custom/log'"),(0,e._)("span",{style:{color:"#C9D1D9"}},", "),(0,e._)("span",{style:{color:"#8B949E"}},"//日志输出目录")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#C9D1D9"}},"  errorLogName: "),(0,e._)("span",{style:{color:"#A5D6FF"}},"'errorlogger.log'"),(0,e._)("span",{style:{color:"#C9D1D9"}},", "),(0,e._)("span",{style:{color:"#8B949E"}},"//error级别日志文件名")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#C9D1D9"}},"  infoLogName: "),(0,e._)("span",{style:{color:"#A5D6FF"}},"'infologger.log'"),(0,e._)("span",{style:{color:"#C9D1D9"}},", "),(0,e._)("span",{style:{color:"#8B949E"}},"//info级别日志文件名")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#C9D1D9"}},"  warnLogName: "),(0,e._)("span",{style:{color:"#A5D6FF"}},"'warnlogger.log'"),(0,e._)("span",{style:{color:"#C9D1D9"}},", "),(0,e._)("span",{style:{color:"#8B949E"}},"//warn级别日志文件名")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#C9D1D9"}},"  file: "),(0,e._)("span",{style:{color:"#A5D6FF"}},"'/path/to/your/custom/log/logger.log'"),(0,e._)("span",{style:{color:"#C9D1D9"}},", "),(0,e._)("span",{style:{color:"#8B949E"}},"//日志文件写入路径(所有级别日志)")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#C9D1D9"}},"  encoding: "),(0,e._)("span",{style:{color:"#A5D6FF"}},"'utf-8'"),(0,e._)("span",{style:{color:"#C9D1D9"}},", "),(0,e._)("span",{style:{color:"#8B949E"}},"//日志编码格式")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#C9D1D9"}},"  outputJSON: "),(0,e._)("span",{style:{color:"#79C0FF"}},"true"),(0,e._)("span",{style:{color:"#C9D1D9"}},", "),(0,e._)("span",{style:{color:"#8B949E"}},"//是否格式化输出携带pid等信息 false仅输出msg")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#C9D1D9"}},"  consoleLevel: "),(0,e._)("span",{style:{color:"#A5D6FF"}},"'debug'"),(0,e._)("span",{style:{color:"#C9D1D9"}},", "),(0,e._)("span",{style:{color:"#8B949E"}},"//终端日志输出级别")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#C9D1D9"}},"  allowDebugAtProd: "),(0,e._)("span",{style:{color:"#79C0FF"}},"true"),(0,e._)("span",{style:{color:"#C9D1D9"}},", "),(0,e._)("span",{style:{color:"#8B949E"}},"//是否允许打印debug日志")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#C9D1D9"}},"  flushInterval: "),(0,e._)("span",{style:{color:"#79C0FF"}},"1000"),(0,e._)("span",{style:{color:"#C9D1D9"}},", "),(0,e._)("span",{style:{color:"#8B949E"}},"//文件流定时写入")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#C9D1D9"}},"  maxBufferLength: "),(0,e._)("span",{style:{color:"#79C0FF"}},"1000"),(0,e._)("span",{style:{color:"#C9D1D9"}},", "),(0,e._)("span",{style:{color:"#8B949E"}},"//最大buffer 超出限制执行写入")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#C9D1D9"}},"  "),(0,e._)("span",{style:{color:"#D2A8FF"}},"formatter"),(0,e._)("span",{style:{color:"#C9D1D9"}},": "),(0,e._)("span",{style:{color:"#FF7B72"}},"function"),(0,e._)("span",{style:{color:"#C9D1D9"}}," ("),(0,e._)("span",{style:{color:"#FFA657"}},"meta"),(0,e._)("span",{style:{color:"#FF7B72"}},"?:"),(0,e._)("span",{style:{color:"#C9D1D9"}}," "),(0,e._)("span",{style:{color:"#FFA657"}},"TConsoleMeta"),(0,e._)("span",{style:{color:"#C9D1D9"}},") {")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#C9D1D9"}},"    "),(0,e._)("span",{style:{color:"#FF7B72"}},"return"),(0,e._)("span",{style:{color:"#C9D1D9"}}," "),(0,e._)("span",{style:{color:"#A5D6FF"}},"`[${"),(0,e._)("span",{style:{color:"#C9D1D9"}},"meta"),(0,e._)("span",{style:{color:"#A5D6FF"}},"."),(0,e._)("span",{style:{color:"#C9D1D9"}},"level"),(0,e._)("span",{style:{color:"#A5D6FF"}},"} ${"),(0,e._)("span",{style:{color:"#C9D1D9"}},"meta"),(0,e._)("span",{style:{color:"#A5D6FF"}},"."),(0,e._)("span",{style:{color:"#C9D1D9"}},"pid"),(0,e._)("span",{style:{color:"#A5D6FF"}},"}] ${"),(0,e._)("span",{style:{color:"#C9D1D9"}},"meta"),(0,e._)("span",{style:{color:"#A5D6FF"}},"."),(0,e._)("span",{style:{color:"#C9D1D9"}},"date"),(0,e._)("span",{style:{color:"#A5D6FF"}},"} ${"),(0,e._)("span",{style:{color:"#C9D1D9"}},"meta"),(0,e._)("span",{style:{color:"#A5D6FF"}},"."),(0,e._)("span",{style:{color:"#C9D1D9"}},"hostname"),(0,e._)("span",{style:{color:"#A5D6FF"}},"} ${"),(0,e._)("span",{style:{color:"#C9D1D9"}},"meta"),(0,e._)("span",{style:{color:"#A5D6FF"}},"."),(0,e._)("span",{style:{color:"#C9D1D9"}},"paddingMessage"),(0,e._)("span",{style:{color:"#A5D6FF"}},"}: ${"),(0,e._)("span",{style:{color:"#C9D1D9"}},"meta"),(0,e._)("span",{style:{color:"#A5D6FF"}},"."),(0,e._)("span",{style:{color:"#C9D1D9"}},"message"),(0,e._)("span",{style:{color:"#A5D6FF"}},"}`")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#C9D1D9"}},"  }, "),(0,e._)("span",{style:{color:"#8B949E"}},"//日志格式化输出")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#C9D1D9"}},"  splitTime: "),(0,e._)("span",{style:{color:"#A5D6FF"}},"'00 00 * * * *'"),(0,e._)("span",{style:{color:"#C9D1D9"}},", "),(0,e._)("span",{style:{color:"#8B949E"}},"//日志文件切割时间")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#C9D1D9"}},"}")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"})])]),(0,e._)("div",{class:"line-numbers"},[(0,e._)("span",{class:"line-number"},"1"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"2"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"3"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"4"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"5"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"6"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"7"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"8"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"9"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"10"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"11"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"12"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"13"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"14"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"15"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"16"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"17"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"18"),(0,e._)("br")])],-1),w=(0,e._)("h2",{id:"日志路径",tabindex:"-1"},[(0,e._)("a",{class:"header-anchor",href:"#日志路径","aria-hidden":"true"},"#"),(0,e.Uk)(" 日志路径")],-1),N=(0,e._)("ol",null,[(0,e._)("li",null,[(0,e.Uk)("默认日志文件路径：默认都放在"),(0,e._)("code",null,"${APP_ROOT}/log/logger.log"),(0,e.Uk)("路径下；")]),(0,e._)("li",null,[(0,e.Uk)("自定义日志文件路径： "),(0,e._)("code",null,"config.file"),(0,e.Uk)("会把所有日志统一写入"),(0,e._)("code",null,"file"),(0,e.Uk)("所指定的文件中；")])],-1),O=(0,e._)("div",{class:"language-javascript ext-js line-numbers-mode"},[(0,e._)("pre",{class:"shiki",style:{"background-color":"#0d1117"}},[(0,e._)("code",null,[(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#8B949E"}},"// config/logger.config.ts")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#79C0FF"}},"exports"),(0,e._)("span",{style:{color:"#C9D1D9"}},".logger "),(0,e._)("span",{style:{color:"#FF7B72"}},"="),(0,e._)("span",{style:{color:"#C9D1D9"}}," {")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#C9D1D9"}},"  file: "),(0,e._)("span",{style:{color:"#A5D6FF"}},"'/path/to/your/custom/log/logger.log'"),(0,e._)("span",{style:{color:"#C9D1D9"}},", "),(0,e._)("span",{style:{color:"#8B949E"}},"//日志文件路径(所有级别日志统一写入)")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#C9D1D9"}},"}")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"})])]),(0,e._)("div",{class:"line-numbers"},[(0,e._)("span",{class:"line-number"},"1"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"2"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"3"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"4"),(0,e._)("br")])],-1),R=(0,e._)("ol",{start:"3"},[(0,e._)("li",null,"不同级别日志分开打印")],-1),T=(0,e._)("p",null,[(0,e.Uk)("日志按级别分开打印，需配置"),(0,e._)("code",null,"config.dir config.errorLogName ...")],-1),$=(0,e._)("div",{class:"language-javascript ext-js line-numbers-mode"},[(0,e._)("pre",{class:"shiki",style:{"background-color":"#0d1117"}},[(0,e._)("code",null,[(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#8B949E"}},"// config/logger.config.ts")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#79C0FF"}},"exports"),(0,e._)("span",{style:{color:"#C9D1D9"}},".logger "),(0,e._)("span",{style:{color:"#FF7B72"}},"="),(0,e._)("span",{style:{color:"#C9D1D9"}}," {")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#C9D1D9"}},"  dir: "),(0,e._)("span",{style:{color:"#A5D6FF"}},"'/path/to/your/custom/log'"),(0,e._)("span",{style:{color:"#C9D1D9"}},", "),(0,e._)("span",{style:{color:"#8B949E"}},"//日志目录")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#C9D1D9"}},"  errorLogName: "),(0,e._)("span",{style:{color:"#A5D6FF"}},"'errorlogger.log'"),(0,e._)("span",{style:{color:"#C9D1D9"}},", "),(0,e._)("span",{style:{color:"#8B949E"}},"//error级别日志文件名")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#C9D1D9"}},"  infoLogName: "),(0,e._)("span",{style:{color:"#A5D6FF"}},"'infologger.log'"),(0,e._)("span",{style:{color:"#C9D1D9"}},", "),(0,e._)("span",{style:{color:"#8B949E"}},"//info级别日志文件名")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#C9D1D9"}},"  warnLogName: "),(0,e._)("span",{style:{color:"#A5D6FF"}},"'warnlogger.log'"),(0,e._)("span",{style:{color:"#C9D1D9"}},", "),(0,e._)("span",{style:{color:"#8B949E"}},"//warn级别日志文件名")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#C9D1D9"}},"}")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"})])]),(0,e._)("div",{class:"line-numbers"},[(0,e._)("span",{class:"line-number"},"1"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"2"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"3"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"4"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"5"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"6"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"7"),(0,e._)("br")])],-1),I=(0,e._)("p",null,[(0,e.Uk)("所有级别的日志会写入"),(0,e._)("code",null,"/path/to/your/custom/log/logger.log"),(0,e.Uk)("文件")],-1),S=(0,e._)("p",null,[(0,e._)("code",null,"Info"),(0,e.Uk)("级别的日志会写入"),(0,e._)("code",null,"/path/to/your/custom/log/infoLogName.log"),(0,e.Uk)("文件")],-1),G=(0,e._)("p",null,[(0,e._)("code",null,"Warn"),(0,e.Uk)("级别的日志会写入"),(0,e._)("code",null,"/path/to/your/custom/log/warnLogName.log"),(0,e.Uk)("文件")],-1),M=(0,e._)("p",null,[(0,e._)("code",null,"Error"),(0,e.Uk)("级别的日志会写入"),(0,e._)("code",null,"/path/to/your/custom/log/errorLogName.log"),(0,e.Uk)("文件")],-1),P=(0,e._)("h2",{id:"日志分类",tabindex:"-1"},[(0,e._)("a",{class:"header-anchor",href:"#日志分类","aria-hidden":"true"},"#"),(0,e.Uk)(" 日志分类")],-1),Y=(0,e._)("p",null,"框架内置了几种日志，分别在不同的场景下使用：",-1),z=(0,e._)("ul",null,[(0,e._)("li",null,[(0,e._)("code",null,"ContextLogger"),(0,e.Uk)("：默认开启，使用"),(0,e._)("code",null,"this.ctx.logger.info()"),(0,e.Uk)("可使用，可获取上下文")]),(0,e._)("li",null,[(0,e._)("code",null,"errorLogger"),(0,e.Uk)("：任何 logger 的"),(0,e._)("code",null,".error()"),(0,e.Uk)("调用输出的日志都会走此逻辑，默认关闭不使用，开启需要配置"),(0,e._)("code",null,"dir errorLogName")]),(0,e._)("li",null,[(0,e._)("code",null,"infoLogger"),(0,e.Uk)("：任何 logger 的"),(0,e._)("code",null,".info()"),(0,e.Uk)("调用输出的日志都会走此逻辑，默认关闭不使用，开启需要配置"),(0,e._)("code",null,"dir infoLogName")]),(0,e._)("li",null,[(0,e._)("code",null,"warnLogger"),(0,e.Uk)("：任何 logger 的"),(0,e._)("code",null,".warn()"),(0,e.Uk)("调用输出的日志都会走此逻辑，默认关闭不使用，开启需要配置"),(0,e._)("code",null,"dir warnLogName")])],-1),W=(0,e._)("h2",{id:"如何打印日志",tabindex:"-1"},[(0,e._)("a",{class:"header-anchor",href:"#如何打印日志","aria-hidden":"true"},"#"),(0,e.Uk)(" 如何打印日志")],-1),J=(0,e._)("h3",{id:"contextlogger",tabindex:"-1"},[(0,e._)("a",{class:"header-anchor",href:"#contextlogger","aria-hidden":"true"},"#"),(0,e.Uk)(),(0,e._)("code",null,"ContextLogger")],-1),Z=(0,e._)("p",null,[(0,e.Uk)("如果我们在处理请求时需要打印日志，这是需要使用"),(0,e._)("code",null,"ContextLogger"),(0,e.Uk)("，用于记录 Web 行为相关的日志，日志内容会携带当前请求的一些基本信息。")],-1),q=(0,e._)("div",{class:"language-javascript ext-js line-numbers-mode"},[(0,e._)("pre",{class:"shiki",style:{"background-color":"#0d1117"}},[(0,e._)("code",null,[(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#FF7B72"}},"try"),(0,e._)("span",{style:{color:"#C9D1D9"}}," {")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#C9D1D9"}},"  "),(0,e._)("span",{style:{color:"#79C0FF"}},"this"),(0,e._)("span",{style:{color:"#C9D1D9"}},".ctx.logger."),(0,e._)("span",{style:{color:"#D2A8FF"}},"info1"),(0,e._)("span",{style:{color:"#C9D1D9"}},"("),(0,e._)("span",{style:{color:"#79C0FF"}},"12312323"),(0,e._)("span",{style:{color:"#C9D1D9"}},")")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#C9D1D9"}},"} "),(0,e._)("span",{style:{color:"#FF7B72"}},"catch"),(0,e._)("span",{style:{color:"#C9D1D9"}}," (error) {")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#C9D1D9"}},"  "),(0,e._)("span",{style:{color:"#79C0FF"}},"this"),(0,e._)("span",{style:{color:"#C9D1D9"}},".ctx.logger."),(0,e._)("span",{style:{color:"#D2A8FF"}},"error"),(0,e._)("span",{style:{color:"#C9D1D9"}},"("),(0,e._)("span",{style:{color:"#A5D6FF"}},"'错误:'"),(0,e._)("span",{style:{color:"#C9D1D9"}},", error)")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#C9D1D9"}},"}")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#79C0FF"}},"this"),(0,e._)("span",{style:{color:"#C9D1D9"}},".ctx.logger."),(0,e._)("span",{style:{color:"#D2A8FF"}},"info"),(0,e._)("span",{style:{color:"#C9D1D9"}},"("),(0,e._)("span",{style:{color:"#79C0FF"}},"this"),(0,e._)("span",{style:{color:"#C9D1D9"}},".testService."),(0,e._)("span",{style:{color:"#D2A8FF"}},"return1"),(0,e._)("span",{style:{color:"#C9D1D9"}},"())")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#79C0FF"}},"this"),(0,e._)("span",{style:{color:"#C9D1D9"}},".ctx.logger."),(0,e._)("span",{style:{color:"#D2A8FF"}},"debug"),(0,e._)("span",{style:{color:"#C9D1D9"}},"("),(0,e._)("span",{style:{color:"#A5D6FF"}},"'debug'"),(0,e._)("span",{style:{color:"#C9D1D9"}},") "),(0,e._)("span",{style:{color:"#8B949E"}},"// only output to stdout")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#79C0FF"}},"this"),(0,e._)("span",{style:{color:"#C9D1D9"}},".ctx.logger."),(0,e._)("span",{style:{color:"#D2A8FF"}},"info"),(0,e._)("span",{style:{color:"#C9D1D9"}},"("),(0,e._)("span",{style:{color:"#A5D6FF"}},"'info'"),(0,e._)("span",{style:{color:"#C9D1D9"}},")")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#79C0FF"}},"this"),(0,e._)("span",{style:{color:"#C9D1D9"}},".ctx.logger."),(0,e._)("span",{style:{color:"#D2A8FF"}},"warn"),(0,e._)("span",{style:{color:"#C9D1D9"}},"("),(0,e._)("span",{style:{color:"#A5D6FF"}},"'warn'"),(0,e._)("span",{style:{color:"#C9D1D9"}},")")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#79C0FF"}},"this"),(0,e._)("span",{style:{color:"#C9D1D9"}},".ctx.logger."),(0,e._)("span",{style:{color:"#D2A8FF"}},"error"),(0,e._)("span",{style:{color:"#C9D1D9"}},"("),(0,e._)("span",{style:{color:"#A5D6FF"}},"'error'"),(0,e._)("span",{style:{color:"#C9D1D9"}},")")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"})])]),(0,e._)("div",{class:"line-numbers"},[(0,e._)("span",{class:"line-number"},"1"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"2"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"3"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"4"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"5"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"6"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"7"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"8"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"9"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"10"),(0,e._)("br")])],-1),H=(0,e._)("h2",{id:"日志级别",tabindex:"-1"},[(0,e._)("a",{class:"header-anchor",href:"#日志级别","aria-hidden":"true"},"#"),(0,e.Uk)(" 日志级别")],-1),K=(0,e._)("p",null,[(0,e.Uk)("日志分为"),(0,e._)("code",null,"ALL DEBUG INFO WARN ERROR NONE"),(0,e.Uk)("6 个级别。默认会同时打印"),(0,e._)("code",null,"INFO"),(0,e.Uk)("及以上级别的日志到文件和终端，可自定义日志输出级别：")],-1),Q=(0,e._)("h3",{id:"_1-文件日志级别-默认info",tabindex:"-1"},[(0,e._)("a",{class:"header-anchor",href:"#_1-文件日志级别-默认info","aria-hidden":"true"},"#"),(0,e.Uk)(" 1.文件日志级别（默认"),(0,e._)("code",null,"INFO"),(0,e.Uk)("）")],-1),V=(0,e._)("div",{class:"language-javascript ext-js line-numbers-mode"},[(0,e._)("pre",{class:"shiki",style:{"background-color":"#0d1117"}},[(0,e._)("code",null,[(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#8B949E"}},"// config/logger.config.ts")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#79C0FF"}},"exports"),(0,e._)("span",{style:{color:"#C9D1D9"}},".logger "),(0,e._)("span",{style:{color:"#FF7B72"}},"="),(0,e._)("span",{style:{color:"#C9D1D9"}}," {")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#C9D1D9"}},"  level: "),(0,e._)("span",{style:{color:"#A5D6FF"}},"'ALL'"),(0,e._)("span",{style:{color:"#C9D1D9"}},", "),(0,e._)("span",{style:{color:"#8B949E"}},"// 打印所有级别日志到文件中")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#C9D1D9"}},"}")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"})])]),(0,e._)("div",{class:"line-numbers"},[(0,e._)("span",{class:"line-number"},"1"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"2"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"3"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"4"),(0,e._)("br")])],-1),X=(0,e._)("h3",{id:"_2-终端日志级别-默认info",tabindex:"-1"},[(0,e._)("a",{class:"header-anchor",href:"#_2-终端日志级别-默认info","aria-hidden":"true"},"#"),(0,e.Uk)(" 2.终端日志级别（默认"),(0,e._)("code",null,"INFO"),(0,e.Uk)("）")],-1),ll=(0,e._)("div",{class:"language-javascript ext-js line-numbers-mode"},[(0,e._)("pre",{class:"shiki",style:{"background-color":"#0d1117"}},[(0,e._)("code",null,[(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#8B949E"}},"// config/logger.config.ts")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#79C0FF"}},"exports"),(0,e._)("span",{style:{color:"#C9D1D9"}},".logger "),(0,e._)("span",{style:{color:"#FF7B72"}},"="),(0,e._)("span",{style:{color:"#C9D1D9"}}," {")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#C9D1D9"}},"  consoleLevel: "),(0,e._)("span",{style:{color:"#A5D6FF"}},"'NONE'"),(0,e._)("span",{style:{color:"#C9D1D9"}},", "),(0,e._)("span",{style:{color:"#8B949E"}},"//关闭日志终端输出")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#C9D1D9"}},"}")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"})])]),(0,e._)("div",{class:"line-numbers"},[(0,e._)("span",{class:"line-number"},"1"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"2"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"3"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"4"),(0,e._)("br")])],-1),sl=(0,e._)("p",null,[(0,e._)("code",null,"consoleLevel"),(0,e.Uk)("优先级高于"),(0,e._)("code",null,"level"),(0,e.Uk)("，"),(0,e._)("code",null,"consoleLevel"),(0,e.Uk)("仅对终端输出生效。")],-1),nl=(0,e._)("p",null,[(0,e._)("img",{src:o,alt:"images"})],-1),el=(0,e._)("h3",{id:"_3-生产环境关闭打印-debug-日志-默认关闭",tabindex:"-1"},[(0,e._)("a",{class:"header-anchor",href:"#_3-生产环境关闭打印-debug-日志-默认关闭","aria-hidden":"true"},"#"),(0,e.Uk)(" 3.生产环境关闭打印 debug 日志，默认关闭")],-1),ol=(0,e._)("div",{class:"language-javascript ext-js line-numbers-mode"},[(0,e._)("pre",{class:"shiki",style:{"background-color":"#0d1117"}},[(0,e._)("code",null,[(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#8B949E"}},"// config/logger.config.ts")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#79C0FF"}},"exports"),(0,e._)("span",{style:{color:"#C9D1D9"}},".logger "),(0,e._)("span",{style:{color:"#FF7B72"}},"="),(0,e._)("span",{style:{color:"#C9D1D9"}}," {")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#C9D1D9"}},"  allowDebugAtProd: "),(0,e._)("span",{style:{color:"#79C0FF"}},"false"),(0,e._)("span",{style:{color:"#C9D1D9"}},", "),(0,e._)("span",{style:{color:"#8B949E"}},"// 是否打印debug日志")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#C9D1D9"}},"}")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"})])]),(0,e._)("div",{class:"line-numbers"},[(0,e._)("span",{class:"line-number"},"1"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"2"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"3"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"4"),(0,e._)("br")])],-1),al=(0,e._)("h2",{id:"日志文件输出",tabindex:"-1"},[(0,e._)("a",{class:"header-anchor",href:"#日志文件输出","aria-hidden":"true"},"#"),(0,e.Uk)(" 日志文件输出")],-1),rl=(0,e._)("ol",null,[(0,e._)("li",null,[(0,e.Uk)("文件编码，默认编码为"),(0,e._)("code",null,"utf-8"),(0,e.Uk)("，可自定义")]),(0,e._)("li",null,[(0,e.Uk)("日志文件输出格式默认为"),(0,e._)("code",null,"[${meta.level} ${meta.pid}] ${meta.date} ${meta.hostname}: ${meta.message}")])],-1),_l=(0,e._)("p",null,[(0,e._)("img",{src:a,alt:"images"})],-1),cl=(0,e._)("div",{class:"language-javascript ext-js line-numbers-mode"},[(0,e._)("pre",{class:"shiki",style:{"background-color":"#0d1117"}},[(0,e._)("code",null,[(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#8B949E"}},"// config/logger.config.ts")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#79C0FF"}},"exports"),(0,e._)("span",{style:{color:"#C9D1D9"}},".logger "),(0,e._)("span",{style:{color:"#FF7B72"}},"="),(0,e._)("span",{style:{color:"#C9D1D9"}}," {")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#C9D1D9"}},"  encoding: "),(0,e._)("span",{style:{color:"#A5D6FF"}},"'gbk'"),(0,e._)("span",{style:{color:"#C9D1D9"}},",")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#C9D1D9"}},"  outputJSON: "),(0,e._)("span",{style:{color:"#79C0FF"}},"true"),(0,e._)("span",{style:{color:"#C9D1D9"}},",")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#C9D1D9"}},"}")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"})])]),(0,e._)("div",{class:"line-numbers"},[(0,e._)("span",{class:"line-number"},"1"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"2"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"3"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"4"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"5"),(0,e._)("br")])],-1),pl=(0,e._)("h2",{id:"日志切割",tabindex:"-1"},[(0,e._)("a",{class:"header-anchor",href:"#日志切割","aria-hidden":"true"},"#"),(0,e.Uk)(" 日志切割")],-1),tl=(0,e._)("ol",null,[(0,e._)("li",null,[(0,e.Uk)("默认按天切割，在每日"),(0,e._)("code",null,"00:00"),(0,e.Uk)("按照.log.YYYY-MM-DD 文件名切割。")]),(0,e._)("li",null,[(0,e.Uk)("切割文件时间可配置，格式按照"),(0,e._)("code",null,"node-schedule")])],-1),il=(0,e._)("div",{class:"language-javascript ext-js line-numbers-mode"},[(0,e._)("pre",{class:"shiki",style:{"background-color":"#0d1117"}},[(0,e._)("code",null,[(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#8B949E"}},"// config/logger.config.ts")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#79C0FF"}},"exports"),(0,e._)("span",{style:{color:"#C9D1D9"}},".logger "),(0,e._)("span",{style:{color:"#FF7B72"}},"="),(0,e._)("span",{style:{color:"#C9D1D9"}}," {")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#C9D1D9"}},"  splitTime: "),(0,e._)("span",{style:{color:"#A5D6FF"}},"'00 00 * * * *'"),(0,e._)("span",{style:{color:"#C9D1D9"}},",")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#C9D1D9"}},"}")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"})])]),(0,e._)("div",{class:"line-numbers"},[(0,e._)("span",{class:"line-number"},"1"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"2"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"3"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"4"),(0,e._)("br")])],-1),Dl=(0,e._)("p",null,[(0,e.Uk)("切割后日志文件如下所示： "),(0,e._)("img",{src:r,alt:"images"})],-1),yl={},Fl=(0,n(4110).Z)(yl,[["render",function(l,s){return(0,e.wg)(),(0,e.iD)(e.HY,null,[_,c,p,t,i,D,y,F,u,g,b,C,m,d,k,U,A,h,f,B,v,x,L,E,j,w,N,O,R,T,$,I,S,G,M,P,Y,z,W,J,Z,q,H,K,Q,V,X,ll,sl,nl,el,ol,al,rl,_l,cl,pl,tl,il,Dl],64)}]])},464:(l,s,n)=>{n.r(s),n.d(s,{data:()=>e});const e={key:"v-50836ccc",path:"/%E6%8F%92%E4%BB%B6/Logger.html",title:"日志（Logger）",lang:"zh-CN",frontmatter:{head:[["meta",{property:"og:url",content:"/v1/%E6%8F%92%E4%BB%B6/Logger.html"}],["meta",{property:"og:site_name",content:"UMajs"}],["meta",{property:"og:title",content:"日志（Logger）"}],["meta",{property:"og:type",content:"article"}],["meta",{property:"og:locale",content:"zh-CN"}],["meta",{property:"og:locale:alternate",content:"en-US"}],["meta",{name:"twitter:card",content:"summary_large_image"}],["meta",{name:"twitter:image:alt",content:"UMajs"}],["meta",{property:"article:author",content:"JiaZeng"}],["meta",{property:"og:restrictions:age",content:"3+"}],["meta",{name:"twitter:creator",content:"UMajs"}]]},excerpt:"",headers:[{level:2,title:"日志",slug:"日志",children:[]},{level:2,title:"使用plugin-logger",slug:"使用plugin-logger",children:[]},{level:2,title:"使用 UmaLogger",slug:"使用-umalogger",children:[]},{level:2,title:"日志配置",slug:"日志配置",children:[]},{level:2,title:"日志路径",slug:"日志路径",children:[]},{level:2,title:"日志分类",slug:"日志分类",children:[]},{level:2,title:"如何打印日志",slug:"如何打印日志",children:[{level:3,title:"ContextLogger",slug:"contextlogger",children:[]}]},{level:2,title:"日志级别",slug:"日志级别",children:[{level:3,title:"1.文件日志级别（默认INFO）",slug:"_1-文件日志级别-默认info",children:[]},{level:3,title:"2.终端日志级别（默认INFO）",slug:"_2-终端日志级别-默认info",children:[]},{level:3,title:"3.生产环境关闭打印 debug 日志，默认关闭",slug:"_3-生产环境关闭打印-debug-日志-默认关闭",children:[]}]},{level:2,title:"日志文件输出",slug:"日志文件输出",children:[]},{level:2,title:"日志切割",slug:"日志切割",children:[]}],filePathRelative:"插件/Logger.md",git:{updatedTime:1630481998e3,contributors:[{name:"jiazengp",email:"jiazengp@gmail.com",commits:1}]}}},4110:(l,s)=>{s.Z=(l,s)=>{for(const[n,e]of s)l[n]=e;return l}},1948:(l,s,n)=>{l.exports=n.p+"assets/img/consoleprint.1e784b63.png"},9792:(l,s,n)=>{l.exports=n.p+"assets/img/fileprint.71cde54c.png"},8743:(l,s,n)=>{l.exports=n.p+"assets/img/loggers.9e5c2486.png"}}]);