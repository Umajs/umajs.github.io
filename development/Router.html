<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8" />
    <meta property="og:url" content="/development/Router.html"><meta property="og:site_name" content="UMajs"><meta property="og:title" content="路由（Router）"><meta property="og:type" content="article"><meta property="og:locale" content="zh-CN"><meta property="og:locale:alternate" content="en-US"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:image:alt" content="UMajs"><meta property="article:author" content="wuba"><meta property="og:restrictions:age" content="3+"><meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=0,viewport-fit=cover"><meta name="referrer" content="same-origin"><meta name="renderer" content="webkit"><meta name="force-rendering" content="webkit"><meta name="applicable-device" content="pc,mobile"><meta name="msapplication-titleColor" content="#ffffff"><meta name="apple-mobile-web-app-status-bar-style" content="lack-translucent"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="UMajs"><meta name="format-detection" content="telephone=no"><meta name="google" content="notranslate"><meta name="twitter:image" content="https://github.com/Umajs/Umajs/"><meta itemprop="image" content="https://github.com/Umajs/Umajs/"><link rel="manifest" href="/manifest.webmanifest"><link rel="apple-touch-icon" href="/favicon.ico"><link rel="shortcut icon" href="/favicon.ico"><link rel="mask-icon" href="/favicon.ico" color="#ffffff"><script crossOrigin="anonymous" src="https://polyfill.io/v3/polyfill.min.js?features=%7Ehtml5-elements%2CCSS.supports%2ClocalStorage%2Cdefault%2Ces6%2Ces2015%2Ces2016%2CElement.prototype.scroll%2CElement.prototype.scrollBy%2CglobalThis%2Cfetch%2CURLSearchParams"></script><title>路由（Router） | UMajs</title><meta name="description" content="一个简单易用、扩展灵活，基于TypeScript的Node.js Web框架">
    <link rel="preload" href="/assets/js/runtime~app.f3933dd7.js" as="script"><link rel="preload" href="/assets/css/styles.c73a419c.css" as="style"><link rel="preload" href="/assets/js/208.60320659.js" as="script"><link rel="preload" href="/assets/js/app.5b861562.js" as="script">
    <link rel="stylesheet" href="/assets/css/styles.c73a419c.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/" class=""><!----><span class="site-name can-hide">UMajs</span></a></span><div class="navbar-links-wrapper" style=""><!--[--><!--]--><nav class="navbar-links can-hide"><!--[--><div class="navbar-links-item"><a href="/newbieGuide/introduce.md" class="nav-link" aria-label="介绍"><!--[--><!--]--> 介绍 <!--[--><!--]--></a></div><div class="navbar-links-item"><a href="/newbieGuide/quickstart.md" class="nav-link" aria-label="快速开始"><!--[--><!--]--> 快速开始 <!--[--><!--]--></a></div><div class="navbar-links-item"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="SSR"><span class="title">SSR</span><span class="arrow down"></span></button><button class="mobile-dropdown-title" type="button" aria-label="SSR"><span class="title">SSR</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="nav-dropdown"><!--[--><li class="dropdown-item"><a href="/ssr/React-ssr.md" class="nav-link" aria-label="React"><!--[--><!--]--> React <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/ssr/Vue-ssr.md" class="nav-link" aria-label="Vue"><!--[--><!--]--> Vue <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><div class="navbar-links-item"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="v2.x"><span class="title">v2.x</span><span class="arrow down"></span></button><button class="mobile-dropdown-title" type="button" aria-label="v2.x"><span class="title">v2.x</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="nav-dropdown"><!--[--><li class="dropdown-item"><a class="nav-link external" href="https://umajs.gitee.io/v1" rel="noopener noreferrer" target="_blank" aria-label="v1.x"><!--[--><!--]--> v1.x <span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">在新窗口中打开</span><!--]--></span><!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><div class="navbar-links-item"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="选择语言"><span class="title">选择语言</span><span class="arrow down"></span></button><button class="mobile-dropdown-title" type="button" aria-label="选择语言"><span class="title">选择语言</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="nav-dropdown"><!--[--><li class="dropdown-item"><a aria-current="page" href="/development/Router.html" class="router-link-active router-link-exact-active nav-link router-link-active" aria-label="简体中文"><!--[--><!--]--> 简体中文 <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/en/" class="nav-link" aria-label="English"><!--[--><!--]--> English <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><div class="navbar-links-item"><a class="nav-link external" href="https://github.com/Umajs/Umajs" rel="noopener noreferrer" target="_blank" aria-label="Github"><!--[--><!--]--> Github <span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">在新窗口中打开</span><!--]--></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><button class="toggle-dark-button" title="toggle dark mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><form class="search-box" role="search"><input type="search" placeholder="搜索" autocomplete="off" spellcheck="false" value><!----></form></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-links"><!--[--><div class="navbar-links-item"><a href="/newbieGuide/introduce.md" class="nav-link" aria-label="介绍"><!--[--><!--]--> 介绍 <!--[--><!--]--></a></div><div class="navbar-links-item"><a href="/newbieGuide/quickstart.md" class="nav-link" aria-label="快速开始"><!--[--><!--]--> 快速开始 <!--[--><!--]--></a></div><div class="navbar-links-item"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="SSR"><span class="title">SSR</span><span class="arrow down"></span></button><button class="mobile-dropdown-title" type="button" aria-label="SSR"><span class="title">SSR</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="nav-dropdown"><!--[--><li class="dropdown-item"><a href="/ssr/React-ssr.md" class="nav-link" aria-label="React"><!--[--><!--]--> React <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/ssr/Vue-ssr.md" class="nav-link" aria-label="Vue"><!--[--><!--]--> Vue <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><div class="navbar-links-item"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="v2.x"><span class="title">v2.x</span><span class="arrow down"></span></button><button class="mobile-dropdown-title" type="button" aria-label="v2.x"><span class="title">v2.x</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="nav-dropdown"><!--[--><li class="dropdown-item"><a class="nav-link external" href="https://umajs.gitee.io/v1" rel="noopener noreferrer" target="_blank" aria-label="v1.x"><!--[--><!--]--> v1.x <span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">在新窗口中打开</span><!--]--></span><!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><div class="navbar-links-item"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="选择语言"><span class="title">选择语言</span><span class="arrow down"></span></button><button class="mobile-dropdown-title" type="button" aria-label="选择语言"><span class="title">选择语言</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="nav-dropdown"><!--[--><li class="dropdown-item"><a aria-current="page" href="/development/Router.html" class="router-link-active router-link-exact-active nav-link router-link-active" aria-label="简体中文"><!--[--><!--]--> 简体中文 <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/en/" class="nav-link" aria-label="English"><!--[--><!--]--> English <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><div class="navbar-links-item"><a class="nav-link external" href="https://github.com/Umajs/Umajs" rel="noopener noreferrer" target="_blank" aria-label="Github"><!--[--><!--]--> Github <span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">在新窗口中打开</span><!--]--></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-links"><!--[--><!--[--><p class="sidebar-heading sidebar-item">新手指南</p><ul class=""><li><!--[--><a href="/newbieGuide/introduce.html" class="nav-link sidebar-item" aria-label="框架介绍"><!--[--><!--]--> 框架介绍 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/newbieGuide/Uma.md" class="nav-link sidebar-item" aria-label="Uma与Koa"><!--[--><!--]--> Uma与Koa <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/newbieGuide/quickstart.html" class="nav-link sidebar-item" aria-label="快速开始"><!--[--><!--]--> 快速开始 <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--><!--[--><p class="sidebar-heading sidebar-item active">基础功能</p><ul class=""><li><!--[--><a href="/development/Uma.html" class="nav-link sidebar-item" aria-label="Uma 对象"><!--[--><!--]--> Uma 对象 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/development/Router.html" class="router-link-active router-link-exact-active nav-link router-link-active sidebar-item active" aria-label="路由（Router）"><!--[--><!--]--> 路由（Router） <!--[--><!--]--></a><ul class="sidebar-sub-items"><li><!--[--><a aria-current="page" href="/development/Router.html#使用" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="使用"><!--[--><!--]--> 使用 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/development/Router.html#path-修饰器" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="@Path 修饰器"><!--[--><!--]--> @Path 修饰器 <!--[--><!--]--></a><ul class="sidebar-sub-items"><li><!--[--><a aria-current="page" href="/development/Router.html#修饰-class" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="修饰 class"><!--[--><!--]--> 修饰 class <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/development/Router.html#修饰方法" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="修饰方法"><!--[--><!--]--> 修饰方法 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/development/Router.html#methodtype" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="MethodType"><!--[--><!--]--> MethodType <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/development/Router.html#指定多个路径" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="指定多个路径"><!--[--><!--]--> 指定多个路径 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/development/Router.html#正则匹配" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="正则匹配"><!--[--><!--]--> 正则匹配 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/development/Router.html#匹配顺序" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="匹配顺序"><!--[--><!--]--> 匹配顺序 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/development/Router.html#path-扩展" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="Path 扩展"><!--[--><!--]--> Path 扩展 <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--></li><li><!--[--><a aria-current="page" href="/development/Router.html#路由参数处理" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="路由参数处理"><!--[--><!--]--> 路由参数处理 <!--[--><!--]--></a><ul class="sidebar-sub-items"><li><!--[--><a aria-current="page" href="/development/Router.html#param-query-参数处理" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="@Param，@Query 参数处理"><!--[--><!--]--> @Param，@Query 参数处理 <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--></li></ul><!--]--></li><li><!--[--><a href="/development/Controller.html" class="nav-link sidebar-item" aria-label="控制器（Controller）"><!--[--><!--]--> 控制器（Controller） <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/development/Result.html" class="nav-link sidebar-item" aria-label="统一返回（Result）"><!--[--><!--]--> 统一返回（Result） <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/development/Service.html" class="nav-link sidebar-item" aria-label="服务（Service）"><!--[--><!--]--> 服务（Service） <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/development/Plugin.html" class="nav-link sidebar-item" aria-label="插件（Plugin）"><!--[--><!--]--> 插件（Plugin） <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/development/IOC.html" class="nav-link sidebar-item" aria-label="依赖注入（IOC）"><!--[--><!--]--> 依赖注入（IOC） <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/development/AOP.html" class="nav-link sidebar-item" aria-label="面向切面（AOP）"><!--[--><!--]--> 面向切面（AOP） <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/development/Config.html" class="nav-link sidebar-item" aria-label="配置（Config）"><!--[--><!--]--> 配置（Config） <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/development/Middleware.html" class="nav-link sidebar-item" aria-label="中间件（Middleware）"><!--[--><!--]--> 中间件（Middleware） <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/development/Decorator.html" class="nav-link sidebar-item" aria-label="修饰器（Decorator）"><!--[--><!--]--> 修饰器（Decorator） <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/other/ArgDecorator.html" class="nav-link sidebar-item" aria-label="参数装饰器（ArgDecorator）"><!--[--><!--]--> 参数装饰器（ArgDecorator） <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--><!--[--><p class="sidebar-heading sidebar-item">插件</p><ul class=""><li><!--[--><a href="/plugin/Status.html" class="nav-link sidebar-item" aria-label="状态（Status）"><!--[--><!--]--> 状态（Status） <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/plugin/Static.html" class="nav-link sidebar-item" aria-label="静态资源（Static）"><!--[--><!--]--> 静态资源（Static） <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/plugin/Views.html" class="nav-link sidebar-item" aria-label="模板引擎（Views）"><!--[--><!--]--> 模板引擎（Views） <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/plugin/i18n.html" class="nav-link sidebar-item" aria-label="国际化（i18n）"><!--[--><!--]--> 国际化（i18n） <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/plugin/Logger.html" class="nav-link sidebar-item" aria-label="日志（Logger）"><!--[--><!--]--> 日志（Logger） <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/plugin/Session.html" class="nav-link sidebar-item" aria-label="会话（Session）"><!--[--><!--]--> 会话（Session） <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/plugin/schedule.html" class="nav-link sidebar-item" aria-label="定时任务(schedule)"><!--[--><!--]--> 定时任务(schedule) <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/plugin/dev.html" class="nav-link sidebar-item" aria-label="插件开发"><!--[--><!--]--> 插件开发 <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--><!--[--><p class="sidebar-heading sidebar-item">其它</p><ul class=""><li><!--[--><a href="/other/debug.html" class="nav-link sidebar-item" aria-label="断点调试（Debugger）"><!--[--><!--]--> 断点调试（Debugger） <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/other/errorHandling.html" class="nav-link sidebar-item" aria-label="错误处理（ErrorHandler）"><!--[--><!--]--> 错误处理（ErrorHandler） <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/plugin/Logger.html" class="nav-link sidebar-item" aria-label="日志（Logger）"><!--[--><!--]--> 日志（Logger） <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--><!--[--><p class="sidebar-heading sidebar-item">服务端渲染</p><ul class=""><li><!--[--><a href="/ssr/React-ssr.md" class="nav-link sidebar-item" aria-label="React"><!--[--><!--]--> React <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/ssr/Vue-ssr.md" class="nav-link sidebar-item" aria-label="Vue2.0"><!--[--><!--]--> Vue2.0 <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--><!--[--><p class="sidebar-heading sidebar-item">项目升级</p><ul class=""><li><!--[--><a href="/other/v1Update.html" class="nav-link sidebar-item" aria-label="v1迁移指南"><!--[--><!--]--> v1迁移指南 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/other/preMigration.html" class="nav-link sidebar-item" aria-label="koa渐进迁移"><!--[--><!--]--> koa渐进迁移 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/other/expressUpdate.html" class="nav-link sidebar-item" aria-label="express迁移"><!--[--><!--]--> express迁移 <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--[--><nav class="vuepress-toc docs-anchor" style="display:none;"><ul class="vuepress-toc-list"><li class="vuepress-toc-item"><a aria-current="page" href="/development/Router.html#使用" class="router-link-active router-link-exact-active vuepress-toc-link" arialabel="使用">使用</a><!--[--><!--]--></li><li class="vuepress-toc-item"><a aria-current="page" href="/development/Router.html#path-修饰器" class="router-link-active router-link-exact-active vuepress-toc-link" arialabel="@Path 修饰器">@Path 修饰器</a><!--[--><ul class="vuepress-toc-list"><li class="vuepress-toc-item"><a aria-current="page" href="/development/Router.html#修饰-class" class="router-link-active router-link-exact-active vuepress-toc-link" arialabel="修饰 class">修饰 class</a><!--[--><!--]--></li><li class="vuepress-toc-item"><a aria-current="page" href="/development/Router.html#修饰方法" class="router-link-active router-link-exact-active vuepress-toc-link" arialabel="修饰方法">修饰方法</a><!--[--><!--]--></li><li class="vuepress-toc-item"><a aria-current="page" href="/development/Router.html#methodtype" class="router-link-active router-link-exact-active vuepress-toc-link" arialabel="MethodType">MethodType</a><!--[--><!--]--></li><li class="vuepress-toc-item"><a aria-current="page" href="/development/Router.html#指定多个路径" class="router-link-active router-link-exact-active vuepress-toc-link" arialabel="指定多个路径">指定多个路径</a><!--[--><!--]--></li><li class="vuepress-toc-item"><a aria-current="page" href="/development/Router.html#正则匹配" class="router-link-active router-link-exact-active vuepress-toc-link" arialabel="正则匹配">正则匹配</a><!--[--><!--]--></li><li class="vuepress-toc-item"><a aria-current="page" href="/development/Router.html#匹配顺序" class="router-link-active router-link-exact-active vuepress-toc-link" arialabel="匹配顺序">匹配顺序</a><!--[--><!--]--></li><li class="vuepress-toc-item"><a aria-current="page" href="/development/Router.html#path-扩展" class="router-link-active router-link-exact-active vuepress-toc-link" arialabel="Path 扩展">Path 扩展</a><!--[--><!--]--></li></ul><!--]--></li><li class="vuepress-toc-item"><a aria-current="page" href="/development/Router.html#路由参数处理" class="router-link-active router-link-exact-active vuepress-toc-link" arialabel="路由参数处理">路由参数处理</a><!--[--><ul class="vuepress-toc-list"><li class="vuepress-toc-item"><a aria-current="page" href="/development/Router.html#param-query-参数处理" class="router-link-active router-link-exact-active vuepress-toc-link" arialabel="@Param，@Query 参数处理">@Param，@Query 参数处理</a><!--[--><!--]--></li></ul><!--]--></li></ul></nav><!--]--><!--]--><div class="theme-default-content"><!--[--><h1 id="路由-router" tabindex="-1"><a class="header-anchor" href="#路由-router" aria-hidden="true">#</a> 路由（Router）</h1><p>路由主要用于确认如何响应客户端的请求，当用户访问一个地址时，需要找到指定的 controller 的指定方法对用户请求进行处理。确认一个请求主要对请求的两部分：路径和特定 HTTP 请求方法，进行判断。</p><h2 id="使用" tabindex="-1"><a class="header-anchor" href="#使用" aria-hidden="true">#</a> 使用</h2><p>为了方便用户对路由的选择，Router 被作为参数的方式传入到 Uma 中。</p><div class="language-javascript ext-js line-numbers-mode"><pre class="shiki" style="background-color:#0d1117;"><code><span class="line"><span style="color:#FF7B72;">import</span><span style="color:#C9D1D9;"> { Router } </span><span style="color:#FF7B72;">from</span><span style="color:#C9D1D9;"> </span><span style="color:#A5D6FF;">&#39;@umajs/router&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF7B72;">const</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">uma</span><span style="color:#C9D1D9;"> </span><span style="color:#FF7B72;">=</span><span style="color:#C9D1D9;"> Uma.</span><span style="color:#D2A8FF;">instance</span><span style="color:#C9D1D9;">({</span></span>
<span class="line"><span style="color:#C9D1D9;">  Router,</span></span>
<span class="line"><span style="color:#C9D1D9;">  ROOT: __dirname,</span></span>
<span class="line"><span style="color:#C9D1D9;">})</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C9D1D9;">uma.</span><span style="color:#D2A8FF;">start</span><span style="color:#C9D1D9;">(</span><span style="color:#79C0FF;">8058</span><span style="color:#C9D1D9;">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h2 id="path-修饰器" tabindex="-1"><a class="header-anchor" href="#path-修饰器" aria-hidden="true">#</a> @Path 修饰器</h2><p>如果你不想通过默认路由的方式访问时，<code>Uma</code>提供了<code>@Path修饰器</code>来指定 controller 方法被访问的 URI 格式。</p><blockquote><p>可以装饰 class，作为跟路由，只装饰 class 不生效，必须和 method 装饰配合使用。装饰 class 只有能有一个 string 参数 可以装饰 method，没有根路由的时候直接作为路由使用，有根路由的时候和根路由组合使用</p><p>export declare function Path(...args: [...string[]] | [TPathObjArgs]): Function;</p><p>args 路由参数 eg:</p><p>Path() // 仅在 class 有路由装饰时 装饰 method 使用</p><p>Path(&#39;/p1&#39;)</p><p>Path(&#39;/p1&#39;, &#39;p2&#39;)</p><p>Path({ value: &#39;/p1&#39; })</p><p>Path({ value: &#39;/p1&#39;, method: RequestMethod.GET })</p><p>Path({ value: [&#39;/p1&#39;, &#39;/p2&#39;], method: RequestMethod.GET })</p><p>Path({ value: [&#39;/p1&#39;, &#39;/p2&#39;], method: [RequestMethod.GET, RequestMethod.POST] })</p></blockquote><h3 id="修饰-class" tabindex="-1"><a class="header-anchor" href="#修饰-class" aria-hidden="true">#</a> 修饰 class</h3><p>@Path 修饰器除了能修饰方法外，还可以修饰 controller 的 class，被修饰后的 class，如果内层的方法同时也添加了 @Path 修饰器，那么该方法的访问路径将和 class 上的 @Path 指定路径合并使用。</p><p>例如我们对上面创建的 test.controller.ts 文件做以下修改：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="shiki" style="background-color:#0d1117;"><code><span class="line"><span style="color:#FF7B72;">import</span><span style="color:#C9D1D9;"> { BaseController, Path } </span><span style="color:#FF7B72;">from</span><span style="color:#C9D1D9;"> </span><span style="color:#A5D6FF;">&#39;@umajs/core&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C9D1D9;">@</span><span style="color:#D2A8FF;">Path</span><span style="color:#C9D1D9;">(</span><span style="color:#A5D6FF;">&#39;/page&#39;</span><span style="color:#C9D1D9;">) </span><span style="color:#8B949E;">// 根路由</span></span>
<span class="line"><span style="color:#FF7B72;">export</span><span style="color:#FFA657;"> </span><span style="color:#FF7B72;">default</span><span style="color:#FFA657;"> </span><span style="color:#FF7B72;">class</span><span style="color:#FFA657;"> Test </span><span style="color:#FF7B72;">extends</span><span style="color:#FFA657;"> </span><span style="color:#79C0FF;">BaseController</span><span style="color:#FFA657;"> {</span></span>
<span class="line"><span style="color:#FFA657;">  @</span><span style="color:#D2A8FF;">Path</span><span style="color:#FFA657;">() </span><span style="color:#8B949E;">// 路由： /page</span></span>
<span class="line"><span style="color:#FFA657;">  @</span><span style="color:#D2A8FF;">Path</span><span style="color:#FFA657;">(</span><span style="color:#A5D6FF;">&#39;/home&#39;</span><span style="color:#FFA657;">) </span><span style="color:#8B949E;">// 路由： /page/home</span></span>
<span class="line"><span style="color:#FFA657;">  </span><span style="color:#D2A8FF;">index</span><span style="color:#FFA657;">() </span><span style="color:#C9D1D9;">{</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">return</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">this</span><span style="color:#C9D1D9;">.</span><span style="color:#D2A8FF;">send</span><span style="color:#C9D1D9;">(</span><span style="color:#A5D6FF;">&#39;this is page/index router&#39;</span><span style="color:#C9D1D9;">)</span></span>
<span class="line"><span style="color:#C9D1D9;">  }</span></span>
<span class="line"><span style="color:#FFA657;">  </span><span style="color:#D2A8FF;">test</span><span style="color:#FFA657;">() </span><span style="color:#C9D1D9;">{</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">return</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">this</span><span style="color:#C9D1D9;">.</span><span style="color:#D2A8FF;">send</span><span style="color:#C9D1D9;">(</span><span style="color:#A5D6FF;">&#39;this is test/index router&#39;</span><span style="color:#C9D1D9;">)</span></span>
<span class="line"><span style="color:#C9D1D9;">  }</span></span>
<span class="line"><span style="color:#FFA657;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>在浏览器地址栏通过访问<code>127.0.0.1:端口号/page/home</code> 或 <code>127.0.0.1:端口号/page/</code>就可以看到页面显示出<code>this is page/index router</code>。</p><blockquote><p>注意：v2.0 版本之后，框架取消了文件默认路由，即我们不能通过<code>127.0.0.1:端口号/page/test</code>访问到目标函数，接口将会返回 Not Found。请确保所有路由都被<code>@Path</code>装饰。</p><p>同时，访问<code>127.0.0.1:端口号/page</code>也可以看到页面显示出<code>this is test/index router</code></p></blockquote><h3 id="修饰方法" tabindex="-1"><a class="header-anchor" href="#修饰方法" aria-hidden="true">#</a> 修饰方法</h3><p>例如我们对上面创建的 test.controller.ts 文件做以下修改：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="shiki" style="background-color:#0d1117;"><code><span class="line"><span style="color:#FF7B72;">export</span><span style="color:#FFA657;"> </span><span style="color:#FF7B72;">default</span><span style="color:#FFA657;"> </span><span style="color:#FF7B72;">class</span><span style="color:#FFA657;"> Test </span><span style="color:#FF7B72;">extends</span><span style="color:#FFA657;"> </span><span style="color:#79C0FF;">BaseController</span><span style="color:#FFA657;"> {</span></span>
<span class="line"><span style="color:#FFA657;">  @</span><span style="color:#D2A8FF;">Path</span><span style="color:#FFA657;">(</span><span style="color:#A5D6FF;">&#39;/home&#39;</span><span style="color:#FFA657;">)</span></span>
<span class="line"><span style="color:#FFA657;">  </span><span style="color:#D2A8FF;">index</span><span style="color:#FFA657;">() </span><span style="color:#C9D1D9;">{</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">return</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">this</span><span style="color:#C9D1D9;">.</span><span style="color:#D2A8FF;">send</span><span style="color:#C9D1D9;">(</span><span style="color:#A5D6FF;">&#39;this is test/index router&#39;</span><span style="color:#C9D1D9;">)</span></span>
<span class="line"><span style="color:#C9D1D9;">  }</span></span>
<span class="line"><span style="color:#FFA657;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>在浏览器地址栏通过访问<code>127.0.0.1:端口号/home</code>就可以看到页面显示出<code>this is test/index router</code>。</p><blockquote><p>注意：此时，在浏览器地址栏访问<code>127.0.0.1:端口号/test/index</code>就不能访问到 index 方法了，因为在<code>Uma</code>中，被@Path 修饰器修饰过的方法，不能再通过默认路由的方式访问。</p></blockquote><h3 id="methodtype" tabindex="-1"><a class="header-anchor" href="#methodtype" aria-hidden="true">#</a> MethodType</h3><p>在很多访问中，我们需要加入 MethodType 的限制，示例如下：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="shiki" style="background-color:#0d1117;"><code><span class="line"><span style="color:#FF7B72;">import</span><span style="color:#C9D1D9;"> { BaseController, Path, RequestMethod } </span><span style="color:#FF7B72;">from</span><span style="color:#C9D1D9;"> </span><span style="color:#A5D6FF;">&#39;@umajs/core&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF7B72;">export</span><span style="color:#FFA657;"> </span><span style="color:#FF7B72;">default</span><span style="color:#FFA657;"> </span><span style="color:#FF7B72;">class</span><span style="color:#FFA657;"> Test </span><span style="color:#FF7B72;">extends</span><span style="color:#FFA657;"> </span><span style="color:#79C0FF;">BaseController</span><span style="color:#FFA657;"> {</span></span>
<span class="line"><span style="color:#FFA657;">  @</span><span style="color:#D2A8FF;">Path</span><span style="color:#FFA657;">({ </span><span style="color:#C9D1D9;">value: </span><span style="color:#A5D6FF;">&#39;/home&#39;</span><span style="color:#FFA657;">, </span><span style="color:#C9D1D9;">method: RequestMethod.</span><span style="color:#79C0FF;">POST</span><span style="color:#C9D1D9;"> </span><span style="color:#FFA657;">})</span></span>
<span class="line"><span style="color:#FFA657;">  </span><span style="color:#D2A8FF;">index</span><span style="color:#FFA657;">() </span><span style="color:#C9D1D9;">{</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">return</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">this</span><span style="color:#C9D1D9;">.</span><span style="color:#D2A8FF;">send</span><span style="color:#C9D1D9;">(</span><span style="color:#A5D6FF;">&#39;this is test/index router&#39;</span><span style="color:#C9D1D9;">)</span></span>
<span class="line"><span style="color:#C9D1D9;">  }</span></span>
<span class="line"><span style="color:#FFA657;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>在浏览器地址栏通过访问<code>127.0.0.1:端口号/home</code>会展示 NOT FOUND，这是因为限制了只能采用 POST 访问。</p><blockquote><p>注意：框架内置了 POST 请求处理 <code>koa-body</code>，如果需要开启，实例化 <code>Uma</code> 时需要传入 <code>bodyParse</code> 参数，并且安装 <code>koa-body</code> 依赖</p></blockquote><h3 id="指定多个路径" tabindex="-1"><a class="header-anchor" href="#指定多个路径" aria-hidden="true">#</a> 指定多个路径</h3><p>同一个方法上允许设置多个 Path 路径。</p><p>例如我们对上面创建的 test.controller.ts 文件做以下修改：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="shiki" style="background-color:#0d1117;"><code><span class="line"><span style="color:#FF7B72;">import</span><span style="color:#C9D1D9;"> { BaseController, Path } </span><span style="color:#FF7B72;">from</span><span style="color:#C9D1D9;"> </span><span style="color:#A5D6FF;">&#39;@umajs/core&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C9D1D9;">@</span><span style="color:#D2A8FF;">Path</span><span style="color:#C9D1D9;">(</span><span style="color:#A5D6FF;">&#39;/page&#39;</span><span style="color:#C9D1D9;">)</span></span>
<span class="line"><span style="color:#FF7B72;">export</span><span style="color:#FFA657;"> </span><span style="color:#FF7B72;">default</span><span style="color:#FFA657;"> </span><span style="color:#FF7B72;">class</span><span style="color:#FFA657;"> Test </span><span style="color:#FF7B72;">extends</span><span style="color:#FFA657;"> </span><span style="color:#79C0FF;">BaseController</span><span style="color:#FFA657;"> {</span></span>
<span class="line"><span style="color:#FFA657;">  @</span><span style="color:#D2A8FF;">Path</span><span style="color:#FFA657;">(</span><span style="color:#A5D6FF;">&#39;/home&#39;</span><span style="color:#FFA657;">, </span><span style="color:#A5D6FF;">&#39;/abc&#39;</span><span style="color:#FFA657;">)</span></span>
<span class="line"><span style="color:#FFA657;">  </span><span style="color:#D2A8FF;">index</span><span style="color:#FFA657;">() </span><span style="color:#C9D1D9;">{</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">return</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">this</span><span style="color:#C9D1D9;">.</span><span style="color:#D2A8FF;">send</span><span style="color:#C9D1D9;">(</span><span style="color:#A5D6FF;">&#39;this is test/index router&#39;</span><span style="color:#C9D1D9;">)</span></span>
<span class="line"><span style="color:#C9D1D9;">  }</span></span>
<span class="line"><span style="color:#FFA657;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>在浏览器地址栏通过访问<code>127.0.0.1:端口号/page/home</code>或者<code>127.0.0.1:端口号/page/abc</code>都可以看到页面显示出<code>this is test/index router</code>。</p><p>也可以通过多个@Path 修饰器修饰的方式指定多个路径。</p><p>例如我们对上面创建的 test.controller.ts 文件做以下修改：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="shiki" style="background-color:#0d1117;"><code><span class="line"><span style="color:#FF7B72;">import</span><span style="color:#C9D1D9;"> { BaseController, Path } </span><span style="color:#FF7B72;">from</span><span style="color:#C9D1D9;"> </span><span style="color:#A5D6FF;">&#39;@umajs/core&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C9D1D9;">@</span><span style="color:#D2A8FF;">Path</span><span style="color:#C9D1D9;">(</span><span style="color:#A5D6FF;">&#39;/page&#39;</span><span style="color:#C9D1D9;">)</span></span>
<span class="line"><span style="color:#FF7B72;">export</span><span style="color:#FFA657;"> </span><span style="color:#FF7B72;">default</span><span style="color:#FFA657;"> </span><span style="color:#FF7B72;">class</span><span style="color:#FFA657;"> Test </span><span style="color:#FF7B72;">extends</span><span style="color:#FFA657;"> </span><span style="color:#79C0FF;">BaseController</span><span style="color:#FFA657;"> {</span></span>
<span class="line"><span style="color:#FFA657;">  @</span><span style="color:#D2A8FF;">Path</span><span style="color:#FFA657;">(</span><span style="color:#A5D6FF;">&#39;/home&#39;</span><span style="color:#FFA657;">, </span><span style="color:#A5D6FF;">&#39;/abc&#39;</span><span style="color:#FFA657;">)</span></span>
<span class="line"><span style="color:#FFA657;">  @</span><span style="color:#D2A8FF;">Path</span><span style="color:#FFA657;">(</span><span style="color:#A5D6FF;">&#39;/test&#39;</span><span style="color:#FFA657;">)</span></span>
<span class="line"><span style="color:#FFA657;">  </span><span style="color:#D2A8FF;">index</span><span style="color:#FFA657;">() </span><span style="color:#C9D1D9;">{</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">return</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">this</span><span style="color:#C9D1D9;">.</span><span style="color:#D2A8FF;">send</span><span style="color:#C9D1D9;">(</span><span style="color:#A5D6FF;">&#39;this is test/index router&#39;</span><span style="color:#C9D1D9;">)</span></span>
<span class="line"><span style="color:#C9D1D9;">  }</span></span>
<span class="line"><span style="color:#FFA657;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>在浏览器地址栏通过访问<code>127.0.0.1:端口号/page/home</code>或者<code>127.0.0.1:端口号/page/abc</code>或者<code>127.0.0.1:端口号/page/test</code>都可以看到页面显示出<code>this is test/index router</code>。</p><p>和方法不同，一个 class 只允许使用一个@Path 修饰器，同时一个@Path 修饰器只接收一个参数。</p><p>例如我们对上面创建的 test.controller.ts 文件做以下修改：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="shiki" style="background-color:#0d1117;"><code><span class="line"><span style="color:#FF7B72;">import</span><span style="color:#C9D1D9;"> { BaseController, Path } </span><span style="color:#FF7B72;">from</span><span style="color:#C9D1D9;"> </span><span style="color:#A5D6FF;">&#39;@umajs/core&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C9D1D9;">@</span><span style="color:#D2A8FF;">Path</span><span style="color:#C9D1D9;">(</span><span style="color:#A5D6FF;">&#39;/page&#39;</span><span style="color:#C9D1D9;">)</span></span>
<span class="line"><span style="color:#C9D1D9;">@</span><span style="color:#D2A8FF;">Path</span><span style="color:#C9D1D9;">(</span><span style="color:#A5D6FF;">&#39;/tpl&#39;</span><span style="color:#C9D1D9;">)</span></span>
<span class="line"><span style="color:#FF7B72;">export</span><span style="color:#FFA657;"> </span><span style="color:#FF7B72;">default</span><span style="color:#FFA657;"> </span><span style="color:#FF7B72;">class</span><span style="color:#FFA657;"> Test </span><span style="color:#FF7B72;">extends</span><span style="color:#FFA657;"> </span><span style="color:#79C0FF;">BaseController</span><span style="color:#FFA657;"> {</span></span>
<span class="line"><span style="color:#FFA657;">  @</span><span style="color:#D2A8FF;">Path</span><span style="color:#FFA657;">(</span><span style="color:#A5D6FF;">&#39;/home&#39;</span><span style="color:#FFA657;">, </span><span style="color:#A5D6FF;">&#39;/abc&#39;</span><span style="color:#FFA657;">)</span></span>
<span class="line"><span style="color:#FFA657;">  @</span><span style="color:#D2A8FF;">Path</span><span style="color:#FFA657;">(</span><span style="color:#A5D6FF;">&#39;/test&#39;</span><span style="color:#FFA657;">)</span></span>
<span class="line"><span style="color:#FFA657;">  </span><span style="color:#D2A8FF;">index</span><span style="color:#FFA657;">() </span><span style="color:#C9D1D9;">{</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">return</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">this</span><span style="color:#C9D1D9;">.</span><span style="color:#D2A8FF;">send</span><span style="color:#C9D1D9;">(</span><span style="color:#A5D6FF;">&#39;this is test/index router&#39;</span><span style="color:#C9D1D9;">)</span></span>
<span class="line"><span style="color:#C9D1D9;">  }</span></span>
<span class="line"><span style="color:#FFA657;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>此时，只有最上面的<code>@Path(&#39;/page&#39;)</code>生效了，因为修饰器会先执行最接近自己的，@Path(&#39;/tpl&#39;)先被作用，但是@Path(&#39;/page&#39;)又将它覆盖了。</p><p>同样，如果你在 class 上设置<code>@Path(&#39;/page&#39;, &#39;/tpl&#39;)</code>这种传入多个参数的格式，程序会报错，因为修饰 class 时，@Path 只接收一个参数。</p><h3 id="正则匹配" tabindex="-1"><a class="header-anchor" href="#正则匹配" aria-hidden="true">#</a> 正则匹配</h3><p>我们对上面这种直接使用具体字符串形式设置的路由称为<code>静态路由</code>，路径除了使用<code>/home</code>这种字符串的格式外，还支持使用正则形式，我们称之为<code>正则路由</code>。</p><p>例如我们对上面创建的 test.controller.ts 文件做以下修改：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="shiki" style="background-color:#0d1117;"><code><span class="line"><span style="color:#FF7B72;">import</span><span style="color:#C9D1D9;"> { BaseController, Path } </span><span style="color:#FF7B72;">from</span><span style="color:#C9D1D9;"> </span><span style="color:#A5D6FF;">&#39;@umajs/core&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C9D1D9;">@</span><span style="color:#D2A8FF;">Path</span><span style="color:#C9D1D9;">(</span><span style="color:#A5D6FF;">&#39;/page&#39;</span><span style="color:#C9D1D9;">)</span></span>
<span class="line"><span style="color:#FF7B72;">export</span><span style="color:#FFA657;"> </span><span style="color:#FF7B72;">default</span><span style="color:#FFA657;"> </span><span style="color:#FF7B72;">class</span><span style="color:#FFA657;"> Test </span><span style="color:#FF7B72;">extends</span><span style="color:#FFA657;"> </span><span style="color:#79C0FF;">BaseController</span><span style="color:#FFA657;"> {</span></span>
<span class="line"><span style="color:#FFA657;">  @</span><span style="color:#D2A8FF;">Path</span><span style="color:#FFA657;">(</span><span style="color:#A5D6FF;">&#39;/:name&#39;</span><span style="color:#FFA657;">)</span></span>
<span class="line"><span style="color:#FFA657;">  </span><span style="color:#D2A8FF;">index</span><span style="color:#FFA657;">() </span><span style="color:#C9D1D9;">{</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">return</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">this</span><span style="color:#C9D1D9;">.</span><span style="color:#D2A8FF;">send</span><span style="color:#C9D1D9;">(</span><span style="color:#A5D6FF;">&#39;this is test/index router&#39;</span><span style="color:#C9D1D9;">)</span></span>
<span class="line"><span style="color:#C9D1D9;">  }</span></span>
<span class="line"><span style="color:#FFA657;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>在浏览器地址栏通过访问<code>127.0.0.1:端口号/page/任意字符</code>都可以看到页面显示出<code>this is test/index router</code>。同时，我们可以通过<code>@Param修饰器</code>或者<code>ctx.params</code>的方式获取到当前<code>name</code>的值，@Param 修饰器会在后面介绍。</p><p>正则路由通过<a href="https://github.com/pillarjs/path-to-regexp" target="_blank" rel="noopener noreferrer">path-to-regexp<span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">在新窗口中打开</span><!--]--></span></a>库进行匹配，具体格式格式参考 path-to-regexp 库。</p><h3 id="匹配顺序" tabindex="-1"><a class="header-anchor" href="#匹配顺序" aria-hidden="true">#</a> 匹配顺序</h3><p><code>Uma</code>会按照的指定顺序去匹配路由，当命中某一规则时，即进入该 controller 的方法中，了解匹配的顺序当我们设置了重复的路由时很有帮助。</p><p><code>Uma</code>匹配路由的顺序如下：</p><p><img src="/assets/img/Router-rule.2b08d599.png" alt="images"></p><p>请求进来时，会先从静态路由中查找是否有匹配到的，没有的话会从正则路由中匹配是否有满足的，还未找到的话会按照静态路由的格式查找是否有匹配的，当这几种情况都不满足时，返回 Not Found。</p><h3 id="path-扩展" tabindex="-1"><a class="header-anchor" href="#path-扩展" aria-hidden="true">#</a> Path 扩展</h3><p>框架在 <code>@Path</code> 装饰器的基础上还提供了一些其它快捷的路由装饰器 <a href="/other/path.html" class="">@umajs/path</a></p><h2 id="路由参数处理" tabindex="-1"><a class="header-anchor" href="#路由参数处理" aria-hidden="true">#</a> 路由参数处理</h2><p>在上面的正则路由中我们提到过@Param 修饰器，<code>UMajs</code>中默认只提供了两种修饰器@Param 和@Query 来方便的获取请求中的参数。对于更丰富的参数处理场景，框架提供了一个专门处理参数的装饰器工具包，<a href="/other/ArgDecorator.html" class="">@umajs/arg-decorator</a>;方便开发者对参数进行接收，校验判断和类型转换。</p><h3 id="param-query-参数处理" tabindex="-1"><a class="header-anchor" href="#param-query-参数处理" aria-hidden="true">#</a> @Param，@Query 参数处理</h3><p>例如我们对上面创建的 test.controller.ts 文件做以下修改：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="shiki" style="background-color:#0d1117;"><code><span class="line"><span style="color:#FF7B72;">import</span><span style="color:#C9D1D9;"> { BaseController, Path } </span><span style="color:#FF7B72;">from</span><span style="color:#C9D1D9;"> </span><span style="color:#A5D6FF;">&#39;@umajs/core&#39;</span></span>
<span class="line"><span style="color:#FF7B72;">import</span><span style="color:#C9D1D9;"> { Param, Query } </span><span style="color:#FF7B72;">from</span><span style="color:#C9D1D9;"> </span><span style="color:#A5D6FF;">&#39;@umajs/arg-decorator&#39;</span></span>
<span class="line"><span style="color:#C9D1D9;">@</span><span style="color:#D2A8FF;">Path</span><span style="color:#C9D1D9;">(</span><span style="color:#A5D6FF;">&#39;/page&#39;</span><span style="color:#C9D1D9;">)</span></span>
<span class="line"><span style="color:#FF7B72;">export</span><span style="color:#FFA657;"> </span><span style="color:#FF7B72;">default</span><span style="color:#FFA657;"> </span><span style="color:#FF7B72;">class</span><span style="color:#FFA657;"> Test </span><span style="color:#FF7B72;">extends</span><span style="color:#FFA657;"> </span><span style="color:#79C0FF;">BaseController</span><span style="color:#FFA657;"> {</span></span>
<span class="line"><span style="color:#FFA657;">  @</span><span style="color:#D2A8FF;">Path</span><span style="color:#FFA657;">(</span><span style="color:#A5D6FF;">&#39;/:name&#39;</span><span style="color:#FFA657;">)</span></span>
<span class="line"><span style="color:#FFA657;">  </span><span style="color:#D2A8FF;">index</span><span style="color:#FFA657;">(@</span><span style="color:#D2A8FF;">Param</span><span style="color:#FFA657;">(</span><span style="color:#A5D6FF;">&#39;name&#39;</span><span style="color:#FFA657;">) name</span><span style="color:#FF7B72;">:</span><span style="color:#FFA657;"> </span><span style="color:#79C0FF;">string</span><span style="color:#FFA657;">, @</span><span style="color:#D2A8FF;">Query</span><span style="color:#FFA657;">(</span><span style="color:#A5D6FF;">&#39;name&#39;</span><span style="color:#FFA657;">) title</span><span style="color:#FF7B72;">:</span><span style="color:#FFA657;"> </span><span style="color:#79C0FF;">string</span><span style="color:#FFA657;">) </span><span style="color:#C9D1D9;">{</span></span>
<span class="line"><span style="color:#C9D1D9;">    console.</span><span style="color:#D2A8FF;">log</span><span style="color:#C9D1D9;">(</span><span style="color:#A5D6FF;">`name: ${</span><span style="color:#C9D1D9;">name</span><span style="color:#A5D6FF;">}`</span><span style="color:#C9D1D9;">)</span></span>
<span class="line"><span style="color:#C9D1D9;">    console.</span><span style="color:#D2A8FF;">log</span><span style="color:#C9D1D9;">(</span><span style="color:#A5D6FF;">`title: ${</span><span style="color:#C9D1D9;">title</span><span style="color:#A5D6FF;">}`</span><span style="color:#C9D1D9;">)</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">return</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">this</span><span style="color:#C9D1D9;">.</span><span style="color:#D2A8FF;">send</span><span style="color:#C9D1D9;">(</span><span style="color:#A5D6FF;">&#39;this is test/index router&#39;</span><span style="color:#C9D1D9;">)</span></span>
<span class="line"><span style="color:#C9D1D9;">  }</span></span>
<span class="line"><span style="color:#FFA657;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>在浏览器中访问<code>127.0.0.1:端口号/page/test?name=uma</code>，我们可以看到控制台打印出：</p><div class="language-bash ext-sh line-numbers-mode"><pre class="shiki" style="background-color:#0d1117;"><code><span class="line"><span style="color:#C9D1D9;">name: </span><span style="color:#79C0FF;">test</span></span>
<span class="line"><span style="color:#C9D1D9;">title: uma</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>@Param 和@Query 修饰器可以快捷的获取到请求中的 param 和 query 参数，@Param 传入的名称要和@Path 中设置的名称一致，@Query 传入的名称要和请求的 query 参数名称一致，才能正确获取到。</p><p>同时，使用@Param 和@Query 修饰器不区分参数顺序</p><div class="language-javascript ext-js line-numbers-mode"><pre class="shiki" style="background-color:#0d1117;"><code><span class="line"><span style="color:#FF7B72;">-</span><span style="color:#C9D1D9;"> </span><span style="color:#D2A8FF;">index</span><span style="color:#C9D1D9;">(@</span><span style="color:#D2A8FF;">Param</span><span style="color:#C9D1D9;">(</span><span style="color:#A5D6FF;">&#39;name&#39;</span><span style="color:#C9D1D9;">) name: string, @</span><span style="color:#D2A8FF;">Query</span><span style="color:#C9D1D9;">(</span><span style="color:#A5D6FF;">&#39;name&#39;</span><span style="color:#C9D1D9;">) title: string)</span></span>
<span class="line"><span style="color:#8B949E;">// 参数顺序变化也可以正确获取</span></span>
<span class="line"><span style="color:#FF7B72;">+</span><span style="color:#C9D1D9;"> </span><span style="color:#D2A8FF;">index</span><span style="color:#C9D1D9;">(@</span><span style="color:#D2A8FF;">Query</span><span style="color:#C9D1D9;">(</span><span style="color:#A5D6FF;">&#39;name&#39;</span><span style="color:#C9D1D9;">) title: string, @</span><span style="color:#D2A8FF;">Param</span><span style="color:#C9D1D9;">(</span><span style="color:#A5D6FF;">&#39;name&#39;</span><span style="color:#C9D1D9;">) name: string)</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>当然，除了通过@Param 和@Query 修饰器的方式获取参数外，<code>Uma</code>还保留了 koa 的参数获取方式，可以从上下文中获取：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="shiki" style="background-color:#0d1117;"><code><span class="line"><span style="color:#FF7B72;">import</span><span style="color:#C9D1D9;"> { BaseController, Path } </span><span style="color:#FF7B72;">from</span><span style="color:#C9D1D9;"> </span><span style="color:#A5D6FF;">&#39;@umajs/core&#39;</span></span>
<span class="line"><span style="color:#FF7B72;">import</span><span style="color:#C9D1D9;"> { Param, Query } </span><span style="color:#FF7B72;">from</span><span style="color:#C9D1D9;"> </span><span style="color:#A5D6FF;">&#39;@umajs/arg-decorator&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C9D1D9;">@</span><span style="color:#D2A8FF;">Path</span><span style="color:#C9D1D9;">(</span><span style="color:#A5D6FF;">&#39;/page&#39;</span><span style="color:#C9D1D9;">)</span></span>
<span class="line"><span style="color:#FF7B72;">export</span><span style="color:#FFA657;"> </span><span style="color:#FF7B72;">default</span><span style="color:#FFA657;"> </span><span style="color:#FF7B72;">class</span><span style="color:#FFA657;"> Test </span><span style="color:#FF7B72;">extends</span><span style="color:#FFA657;"> </span><span style="color:#79C0FF;">BaseController</span><span style="color:#FFA657;"> {</span></span>
<span class="line"><span style="color:#FFA657;">  @</span><span style="color:#D2A8FF;">Path</span><span style="color:#FFA657;">(</span><span style="color:#A5D6FF;">&#39;/:name&#39;</span><span style="color:#FFA657;">)</span></span>
<span class="line"><span style="color:#FFA657;">  </span><span style="color:#D2A8FF;">index</span><span style="color:#FFA657;">(@</span><span style="color:#D2A8FF;">Param</span><span style="color:#FFA657;">(</span><span style="color:#A5D6FF;">&#39;name&#39;</span><span style="color:#FFA657;">) name</span><span style="color:#FF7B72;">:</span><span style="color:#FFA657;"> </span><span style="color:#79C0FF;">string</span><span style="color:#FFA657;">, @</span><span style="color:#D2A8FF;">Query</span><span style="color:#FFA657;">(</span><span style="color:#A5D6FF;">&#39;name&#39;</span><span style="color:#FFA657;">) title</span><span style="color:#FF7B72;">:</span><span style="color:#FFA657;"> </span><span style="color:#79C0FF;">string</span><span style="color:#FFA657;">) </span><span style="color:#C9D1D9;">{</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#8B949E;">// ====&gt; 从ctx中获取参数</span></span>
<span class="line"><span style="color:#C9D1D9;">    console.</span><span style="color:#D2A8FF;">log</span><span style="color:#C9D1D9;">(</span><span style="color:#79C0FF;">this</span><span style="color:#C9D1D9;">.ctx.param.name)</span></span>
<span class="line"><span style="color:#C9D1D9;">    console.</span><span style="color:#D2A8FF;">log</span><span style="color:#C9D1D9;">(</span><span style="color:#79C0FF;">this</span><span style="color:#C9D1D9;">.ctx.query.title)</span></span>
<span class="line"><span style="color:#C9D1D9;">    </span><span style="color:#FF7B72;">return</span><span style="color:#C9D1D9;"> </span><span style="color:#79C0FF;">this</span><span style="color:#C9D1D9;">.</span><span style="color:#D2A8FF;">send</span><span style="color:#C9D1D9;">(</span><span style="color:#A5D6FF;">&#39;this is test/index router&#39;</span><span style="color:#C9D1D9;">)</span></span>
<span class="line"><span style="color:#C9D1D9;">  }</span></span>
<span class="line"><span style="color:#FFA657;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p><strong>对于POST类型路由请求，参数获取和处理请查看<a href="/other/ArgDecorator.html#%E7%A4%BA%E4%BE%8B" class="">@Body</a></strong></p><!--]--></div><footer class="page-meta"><div class="meta-item edit-link"><a class="nav-link external meta-item-label" href="https://github.com/Umajs/docs-v2/edit/main/docs/development/Router.md" rel="noopener noreferrer" target="_blank" aria-label="在 GitHub 上编辑该页"><!--[--><!--]--> 在 GitHub 上编辑该页 <span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">在新窗口中打开</span><!--]--></span><!--[--><!--]--></a></div><div class="meta-item last-updated"><span class="meta-item-label">更新于: </span><span class="meta-item-info">2021/10/21 11:41:16</span></div><div class="meta-item contributors"><span class="meta-item-label">参与贡献: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: bubblelm@163.com">BubbleM</span><!----><!--]--><!--]--></span></div></footer><nav class="page-nav"><p class="inner"><span class="prev"> ← <a href="/development/Uma.html" class="nav-link" aria-label="Uma 对象"><!--[--><!--]--> Uma 对象 <!--[--><!--]--></a></span><span class="next"><a href="/development/Controller.html" class="nav-link" aria-label="控制器（Controller）"><!--[--><!--]--> 控制器（Controller） <!--[--><!--]--></a> → </span></p></nav><!--[--><!--[--><footer class="docs-footer page-meta"><div class="footerContainer_HpQlRToY" role="presentation"><div class="docsInfo_qcVb0HBf"> MIT Licensed | Copyright © 2005-present 58.com </div></div></footer><!--]--><!--]--></main><!--]--></div><!----><!----><div id="pwa-install"><!----><div id="install-modal-wrapper" style="display:none;"><div class="background"></div><div class="install-modal"><div class="header"><button class="close-button" aria-label="关闭"><svg xmlns="http://www.w3.org/2000/svg" class="icon close-icon" viewbox="0 0 1024 1024" arialabelledby="close"><title id="close" lang="en">close icon</title><g fill="currentColor"><path d="M589.654 511.965 1007.212 84.22a49.777 49.777 0 0 0-.73-70.02 49.046 49.046 0 0 0-69.687.665L519.967 441.946 85.882 14.2a49.08 49.08 0 0 0-69.687.664 49.777 49.777 0 0 0 .664 70.019l433.454 427.082L16.859 939.048a49.777 49.777 0 0 0-.664 70.019 49.013 49.013 0 0 0 69.687.663l434.085-427.746 416.828 427.083A49.013 49.013 0 0 0 972.037 1024a48.416 48.416 0 0 0 34.512-14.27 49.777 49.777 0 0 0 .73-70.019z"></path></g></svg></button><div class="logo"><!--v-if--><div class="title"><h1></h1><p class="desc">该应用可以安装在您的 PC 或移动设备上。这将使该 Web 应用程序外观和行为与其他应用程序相同。它将在出现在应用程序列表中，并可以固定到主屏幕，开始菜单或任务栏。此 Web 应用程序还将能够与其他应用程序和您的操作系统安全地进行交互。</p></div></div></div><div class="content"><div class="highlight"><!--v-if--><!--v-if--></div><div class="description"><h3>详情</h3><p></p></div></div><div class="button-wrapper"><button class="install-button">安装 <span></span></button><button class="cancel-button">取消</button></div></div></div></div><!--]--></div>
    <script src="/assets/js/runtime~app.f3933dd7.js" defer></script><script src="/assets/js/208.60320659.js" defer></script><script src="/assets/js/app.5b861562.js" defer></script>
  </body>
</html>
