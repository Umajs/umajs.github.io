"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[103],{4573:(s,l,n)=>{n.r(l),n.d(l,{default:()=>Vs});var e=n(4386),a=n(9275);const o=(0,e._)("h1",{id:"umajs-react-ssr",tabindex:"-1"},[(0,e._)("a",{class:"header-anchor",href:"#umajs-react-ssr","aria-hidden":"true"},"#"),(0,e.Uk)(" umajs-react-ssr")],-1),r=(0,e._)("code",null,"Umajs-react-ssr",-1),c=(0,e.Uk)("是由"),_={href:"https://github.com/Umajs/plugin-react-ssr",target:"_blank",rel:"noopener noreferrer"},t=(0,e.Uk)("@umajs/plugin-react-ssr"),p=(0,e.Uk)(" 搭配"),i={href:"https://github.com/dazjean/Srejs",target:"_blank",rel:"noopener noreferrer"},D=(0,e.Uk)("Srejs"),y=(0,e.Uk)("构建的轻量级，使用简单，灵活的"),u=(0,e._)("code",null,"React",-1),F=(0,e.Uk)("服务端渲染解决方案;可以在"),b=(0,e._)("code",null,"controller",-1),m=(0,e.Uk)("和"),d=(0,e._)("code",null,"middleware",-1),C=(0,e.Uk)("中灵活使用,通过模板引擎式的语法对"),k=(0,e._)("code",null,"react",-1),U=(0,e.Uk)("页面组件进行服务端渲染。"),h=(0,e._)("h2",{id:"_1、插件介绍",tabindex:"-1"},[(0,e._)("a",{class:"header-anchor",href:"#_1、插件介绍","aria-hidden":"true"},"#"),(0,e.Uk)(" 1、插件介绍")],-1),g=(0,e._)("p",null,[(0,e._)("code",null,"plugin-react-ssr"),(0,e.Uk)("插件扩展了"),(0,e._)("code",null,"Umajs"),(0,e.Uk)("中提供的统一返回处理"),(0,e._)("code",null,"Result"),(0,e.Uk)("对象，新增了"),(0,e._)("code",null,"reactView"),(0,e.Uk)("页面组件渲染方法，可在"),(0,e._)("code",null,"controller"),(0,e.Uk)("自由调用,使用类似传统模板引擎；也同时将方法挂载到了 koa 中间件中的"),(0,e._)("code",null,"ctx"),(0,e.Uk)("对象上；当一些公关的页面组件，比如 404、异常提示页面、登录或者需要在中间件中拦截跳转时可以在"),(0,e._)("code",null,"middleware"),(0,e.Uk)("中调用。")],-1),A=(0,e._)("h2",{id:"_2、特性",tabindex:"-1"},[(0,e._)("a",{class:"header-anchor",href:"#_2、特性","aria-hidden":"true"},"#"),(0,e.Uk)(" 2、特性")],-1),E=(0,e._)("ul",null,[(0,e._)("li",null,[(0,e.Uk)("不默认路由，不需区分前端路由和后端路由概念，且支持页面级组件 AB 测；"),(0,e._)("code",null,"灵活")]),(0,e._)("li",null,[(0,e.Uk)("页面组件中没有"),(0,e._)("code",null,"__isBrowser__"),(0,e.Uk)("之类变量对"),(0,e._)("code",null,"ssr"),(0,e.Uk)("和"),(0,e._)("code",null,"csr"),(0,e.Uk)("模式进行特殊区分处理;"),(0,e._)("code",null,"统一"),(0,e.Uk)("。")]),(0,e._)("li",null,[(0,e.Uk)("自定义"),(0,e._)("code",null,"HTML"),(0,e.Uk)("采用"),(0,e._)("code",null,"htmlWebpackPlugin"),(0,e.Uk)(",没有"),(0,e._)("code",null,"runtime"),(0,e.Uk)("，页面响应速度更高;"),(0,e._)("code",null,"高性能"),(0,e.Uk)("。")]),(0,e._)("li",null,[(0,e.Uk)("支持"),(0,e._)("code",null,"html"),(0,e.Uk)("中使用"),(0,e._)("code",null,"nunjucks"),(0,e.Uk)("类模板引擎语法实现"),(0,e._)("code",null,"SEO"),(0,e.Uk)("；"),(0,e._)("code",null,"易上手"),(0,e.Uk)("。")]),(0,e._)("li",null,[(0,e.Uk)("页面开发不依赖框架包装的任何模块，保持原生的"),(0,e._)("code",null,"React"),(0,e.Uk)("开发体验;"),(0,e._)("code",null,"友好,易升级"),(0,e.Uk)("。")]),(0,e._)("li",null,[(0,e.Uk)("数据获取由服务端统一处理加工，页面视图开发和数据加工分开处理；"),(0,e._)("code",null,"逻辑更清晰"),(0,e.Uk)("。")]),(0,e._)("li",null,[(0,e.Uk)("支持"),(0,e._)("code",null,"SSR"),(0,e.Uk)("和"),(0,e._)("code",null,"CSR"),(0,e.Uk)("动态调整，支持"),(0,e._)("code",null,"SSR"),(0,e.Uk)("缓存,降级。"),(0,e._)("code",null,"高可用"),(0,e.Uk)("。")]),(0,e._)("li",null,[(0,e.Uk)("支持其他"),(0,e._)("code",null,"koa"),(0,e.Uk)("开发框架使用。"),(0,e._)("code",null,"可扩展"),(0,e.Uk)("。")]),(0,e._)("li",null,[(0,e.Uk)("支持 MPA,各页面组件可单独构建，"),(0,e._)("code",null,"可页面级更新"),(0,e.Uk)("。")])],-1),B=(0,e._)("h2",{id:"_3、插件安装",tabindex:"-1"},[(0,e._)("a",{class:"header-anchor",href:"#_3、插件安装","aria-hidden":"true"},"#"),(0,e.Uk)(" 3、插件安装")],-1),x=(0,e._)("div",{class:"language-bash ext-sh line-numbers-mode"},[(0,e._)("pre",{class:"shiki",style:{"background-color":"#0d1117"}},[(0,e._)("code",null,[(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#C9D1D9"}},"yarn add @umajs/plugin-react-ssr --save")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"})])]),(0,e._)("div",{class:"line-numbers"},[(0,e._)("span",{class:"line-number"},"1"),(0,e._)("br")])],-1),v=(0,e._)("h2",{id:"_4、插件配置",tabindex:"-1"},[(0,e._)("a",{class:"header-anchor",href:"#_4、插件配置","aria-hidden":"true"},"#"),(0,e.Uk)(" 4、插件配置")],-1),j=(0,e._)("div",{class:"language-typescript ext-ts line-numbers-mode"},[(0,e._)("pre",{class:"shiki",style:{"background-color":"#0d1117"}},[(0,e._)("code",null,[(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#8B949E"}},"// plugin.config.ts")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#FF7B72"}},"export"),(0,e._)("span",{style:{color:"#FFA657"}}," "),(0,e._)("span",{style:{color:"#FF7B72"}},"default"),(0,e._)("span",{style:{color:"#FFA657"}}," <{ [key"),(0,e._)("span",{style:{color:"#FF7B72"}},":"),(0,e._)("span",{style:{color:"#FFA657"}}," "),(0,e._)("span",{style:{color:"#79C0FF"}},"string"),(0,e._)("span",{style:{color:"#FFA657"}},"]"),(0,e._)("span",{style:{color:"#FF7B72"}},":"),(0,e._)("span",{style:{color:"#FFA657"}}," TPluginConfig }>{")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#FFA657"}},"  "),(0,e._)("span",{style:{color:"#A5D6FF"}},"'react-ssr'"),(0,e._)("span",{style:{color:"#C9D1D9"}},": {")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#C9D1D9"}},"    enable: "),(0,e._)("span",{style:{color:"#79C0FF"}},"true"),(0,e._)("span",{style:{color:"#C9D1D9"}},",")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#C9D1D9"}},"    options: {")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#C9D1D9"}},"      rootDir: "),(0,e._)("span",{style:{color:"#A5D6FF"}},"'web'"),(0,e._)("span",{style:{color:"#C9D1D9"}},", "),(0,e._)("span",{style:{color:"#8B949E"}},"// 客户端页面组件根文件夹")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#C9D1D9"}},"      rootNode: "),(0,e._)("span",{style:{color:"#A5D6FF"}},"'app'"),(0,e._)("span",{style:{color:"#C9D1D9"}},", "),(0,e._)("span",{style:{color:"#8B949E"}},"// 客户端页面挂载根元素ID")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#C9D1D9"}},"      ssr: "),(0,e._)("span",{style:{color:"#79C0FF"}},"true"),(0,e._)("span",{style:{color:"#C9D1D9"}},", "),(0,e._)("span",{style:{color:"#8B949E"}},"// 全局开启服务端渲染")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#C9D1D9"}},"      cache: "),(0,e._)("span",{style:{color:"#79C0FF"}},"false"),(0,e._)("span",{style:{color:"#C9D1D9"}},", "),(0,e._)("span",{style:{color:"#8B949E"}},"// 全局使用服务端渲染缓存 开发环境设置true无效")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#C9D1D9"}},"      prefixCDN: "),(0,e._)("span",{style:{color:"#A5D6FF"}},"'/'"),(0,e._)("span",{style:{color:"#C9D1D9"}},", "),(0,e._)("span",{style:{color:"#8B949E"}},"// 客户端代码部署CDN前缀")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#C9D1D9"}},"    },")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#C9D1D9"}},"  }"),(0,e._)("span",{style:{color:"#FFA657"}},",")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#FFA657"}},"}")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"})])]),(0,e._)("div",{class:"line-numbers"},[(0,e._)("span",{class:"line-number"},"1"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"2"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"3"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"4"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"5"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"6"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"7"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"8"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"9"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"10"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"11"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"12"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"13"),(0,e._)("br")])],-1),f=(0,e._)("h2",{id:"_5、web-目录结构",tabindex:"-1"},[(0,e._)("a",{class:"header-anchor",href:"#_5、web-目录结构","aria-hidden":"true"},"#"),(0,e.Uk)(" 5、web 目录结构")],-1),w=(0,e._)("div",{class:"language-javascript ext-js line-numbers-mode"},[(0,e._)("pre",{class:"shiki",style:{"background-color":"#0d1117"}},[(0,e._)("code",null,[(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#C9D1D9"}},"   "),(0,e._)("span",{style:{color:"#FF7B72"}},"-"),(0,e._)("span",{style:{color:"#C9D1D9"}}," web # rootDir配置可修改")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#C9D1D9"}},"        "),(0,e._)("span",{style:{color:"#FF7B72"}},"-"),(0,e._)("span",{style:{color:"#C9D1D9"}}," pages # 固定目录")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#C9D1D9"}},"            "),(0,e._)("span",{style:{color:"#FF7B72"}},"-"),(0,e._)("span",{style:{color:"#C9D1D9"}}," home #页面名称")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#C9D1D9"}},"                "),(0,e._)("span",{style:{color:"#FF7B72"}},"-"),(0,e._)("span",{style:{color:"#C9D1D9"}}," index.tsx")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#C9D1D9"}},"                "),(0,e._)("span",{style:{color:"#FF7B72"}},"-"),(0,e._)("span",{style:{color:"#C9D1D9"}}," index.scss")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"})])]),(0,e._)("div",{class:"line-numbers"},[(0,e._)("span",{class:"line-number"},"1"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"2"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"3"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"4"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"5"),(0,e._)("br")])],-1),R=(0,e._)("h2",{id:"_6、创建-react-页面组件",tabindex:"-1"},[(0,e._)("a",{class:"header-anchor",href:"#_6、创建-react-页面组件","aria-hidden":"true"},"#"),(0,e.Uk)(" 6、创建 react 页面组件")],-1),S=(0,e._)("blockquote",null,[(0,e._)("p",null,"页面组件开发模式支持 js ,tsx。")],-1),T=(0,e._)("div",{class:"language-tsx ext-tsx line-numbers-mode"},[(0,e._)("pre",{class:"shiki",style:{"background-color":"#0d1117"}},[(0,e._)("code",null,[(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#FF7B72"}},"import"),(0,e._)("span",{style:{color:"#C9D1D9"}}," "),(0,e._)("span",{style:{color:"#A5D6FF"}},"'./home.scss'")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#FF7B72"}},"import"),(0,e._)("span",{style:{color:"#C9D1D9"}}," React "),(0,e._)("span",{style:{color:"#FF7B72"}},"from"),(0,e._)("span",{style:{color:"#C9D1D9"}}," "),(0,e._)("span",{style:{color:"#A5D6FF"}},"'react'")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#FF7B72"}},"type"),(0,e._)("span",{style:{color:"#C9D1D9"}}," "),(0,e._)("span",{style:{color:"#FFA657"}},"typeProps"),(0,e._)("span",{style:{color:"#C9D1D9"}}," "),(0,e._)("span",{style:{color:"#FF7B72"}},"="),(0,e._)("span",{style:{color:"#C9D1D9"}}," {")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#C9D1D9"}},"  "),(0,e._)("span",{style:{color:"#FFA657"}},"say"),(0,e._)("span",{style:{color:"#FF7B72"}},":"),(0,e._)("span",{style:{color:"#C9D1D9"}}," "),(0,e._)("span",{style:{color:"#79C0FF"}},"string")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#C9D1D9"}},"}")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#FF7B72"}},"export"),(0,e._)("span",{style:{color:"#FFA657"}}," "),(0,e._)("span",{style:{color:"#FF7B72"}},"default"),(0,e._)("span",{style:{color:"#FFA657"}}," "),(0,e._)("span",{style:{color:"#FF7B72"}},"function"),(0,e._)("span",{style:{color:"#FFA657"}}," (props"),(0,e._)("span",{style:{color:"#FF7B72"}},":"),(0,e._)("span",{style:{color:"#FFA657"}}," typeProps) "),(0,e._)("span",{style:{color:"#C9D1D9"}},"{")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#C9D1D9"}},"  "),(0,e._)("span",{style:{color:"#FF7B72"}},"const"),(0,e._)("span",{style:{color:"#C9D1D9"}}," { "),(0,e._)("span",{style:{color:"#79C0FF"}},"say"),(0,e._)("span",{style:{color:"#C9D1D9"}}," } "),(0,e._)("span",{style:{color:"#FF7B72"}},"="),(0,e._)("span",{style:{color:"#C9D1D9"}}," props")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#C9D1D9"}},"  "),(0,e._)("span",{style:{color:"#FF7B72"}},"return"),(0,e._)("span",{style:{color:"#C9D1D9"}}," <"),(0,e._)("span",{style:{color:"#7EE787"}},"div"),(0,e._)("span",{style:{color:"#C9D1D9"}}," "),(0,e._)("span",{style:{color:"#79C0FF"}},"className"),(0,e._)("span",{style:{color:"#FF7B72"}},"="),(0,e._)("span",{style:{color:"#A5D6FF"}},'"ts-demo"'),(0,e._)("span",{style:{color:"#C9D1D9"}},">{say}</"),(0,e._)("span",{style:{color:"#7EE787"}},"div"),(0,e._)("span",{style:{color:"#C9D1D9"}},">")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#C9D1D9"}},"}")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"})])]),(0,e._)("div",{class:"line-numbers"},[(0,e._)("span",{class:"line-number"},"1"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"2"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"3"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"4"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"5"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"6"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"7"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"8"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"9"),(0,e._)("br")])],-1),P=(0,e._)("h2",{id:"_7、脚手架初始化模板工程【推荐】",tabindex:"-1"},[(0,e._)("a",{class:"header-anchor",href:"#_7、脚手架初始化模板工程【推荐】","aria-hidden":"true"},"#"),(0,e.Uk)(" 7、脚手架初始化模板工程【推荐】")],-1),q=(0,e._)("blockquote",null,[(0,e._)("p",null,[(0,e.Uk)("在 cli 中支持快速创建"),(0,e._)("code",null,"umajs-react-ssr"),(0,e.Uk)("模板工程。")])],-1),z=(0,e._)("div",{class:"language-bash ext-sh line-numbers-mode"},[(0,e._)("pre",{class:"shiki",style:{"background-color":"#0d1117"}},[(0,e._)("code",null,[(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#C9D1D9"}},"npm i @umajs/cli -g  // 安装cli工具")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#C9D1D9"}},"uma project umajs-react-demo  //通过uma初始化工程，选择react模板工程")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"})])]),(0,e._)("div",{class:"line-numbers"},[(0,e._)("span",{class:"line-number"},"1"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"2"),(0,e._)("br")])],-1),N=(0,e._)("p",null,[(0,e._)("img",{src:"https://user-images.githubusercontent.com/10277671/119756060-8c888200-bed5-11eb-9dda-e0ab7a0410c8.png",alt:"image"})],-1),O=(0,e._)("div",{class:"language-text ext-text line-numbers-mode"},[(0,e._)("pre",{class:"shiki",style:{"background-color":"#0d1117"}},[(0,e._)("code",null,[(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#c9d1d9"}},"cd umajs-react-demo\nyarn install\nyarn start\n\n")])])]),(0,e._)("div",{class:"line-numbers"},[(0,e._)("span",{class:"line-number"},"1"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"2"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"3"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"4"),(0,e._)("br")])],-1),W=(0,e._)("h2",{id:"_8、api",tabindex:"-1"},[(0,e._)("a",{class:"header-anchor",href:"#_8、api","aria-hidden":"true"},"#"),(0,e.Uk)(" 8、API")],-1),V=(0,e._)("blockquote",null,[(0,e._)("p",null,[(0,e.Uk)("插件扩展了"),(0,e._)("code",null,"Umajs"),(0,e.Uk)("中提供的统一返回处理"),(0,e._)("code",null,"Result"),(0,e.Uk)("方法，新增了"),(0,e._)("code",null,"reactView"),(0,e.Uk)("页面组件可在"),(0,e._)("code",null,"controller"),(0,e.Uk)("自由调用,方式类似传统模板引擎使用方法；也同时将方法挂载到了 koa 中间件中的"),(0,e._)("code",null,"ctx"),(0,e.Uk)("对象上；当一些公关的页面组件，比如 404、异常提示页面、登录或者需要在中间件中拦截跳转时可以在"),(0,e._)("code",null,"middleware"),(0,e.Uk)("中调用。")])],-1),M=(0,e._)("div",{class:"language-typescript ext-ts line-numbers-mode"},[(0,e._)("pre",{class:"shiki",style:{"background-color":"#0d1117"}},[(0,e._)("code",null,[(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#FF7B72"}},"interface"),(0,e._)("span",{style:{color:"#C9D1D9"}}," "),(0,e._)("span",{style:{color:"#FFA657"}},"TviewOptions"),(0,e._)("span",{style:{color:"#C9D1D9"}},"{")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#C9D1D9"}},"    "),(0,e._)("span",{style:{color:"#FFA657"}},"ssr"),(0,e._)("span",{style:{color:"#FF7B72"}},"?:"),(0,e._)("span",{style:{color:"#C9D1D9"}}," "),(0,e._)("span",{style:{color:"#79C0FF"}},"boolean"),(0,e._)("span",{style:{color:"#C9D1D9"}},", "),(0,e._)("span",{style:{color:"#8B949E"}},"// 全局开启服务端渲染")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#C9D1D9"}},"    "),(0,e._)("span",{style:{color:"#FFA657"}},"cache"),(0,e._)("span",{style:{color:"#FF7B72"}},"?:"),(0,e._)("span",{style:{color:"#C9D1D9"}}," "),(0,e._)("span",{style:{color:"#79C0FF"}},"boolean"),(0,e._)("span",{style:{color:"#C9D1D9"}},", "),(0,e._)("span",{style:{color:"#8B949E"}},"// 全局使用服务端渲染缓存")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#C9D1D9"}},"    "),(0,e._)("span",{style:{color:"#FFA657"}},"useEngine"),(0,e._)("span",{style:{color:"#FF7B72"}},"?:"),(0,e._)("span",{style:{color:"#C9D1D9"}}," "),(0,e._)("span",{style:{color:"#79C0FF"}},"boolean"),(0,e._)("span",{style:{color:"#C9D1D9"}},", "),(0,e._)("span",{style:{color:"#8B949E"}},"// 渲染自定义html的页面组件时，选择性开启使用模板引擎")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#C9D1D9"}},"    "),(0,e._)("span",{style:{color:"#FFA657"}},"baseName"),(0,e._)("span",{style:{color:"#FF7B72"}},"?:"),(0,e._)("span",{style:{color:"#C9D1D9"}}," "),(0,e._)("span",{style:{color:"#79C0FF"}},"string"),(0,e._)("span",{style:{color:"#C9D1D9"}},", "),(0,e._)("span",{style:{color:"#8B949E"}},"//客户端根路由 仅使用react-router时有效")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#C9D1D9"}},"}")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#C9D1D9"}},"Result."),(0,e._)("span",{style:{color:"#D2A8FF"}},"reactView"),(0,e._)("span",{style:{color:"#C9D1D9"}},"(viewName:string,initProps"),(0,e._)("span",{style:{color:"#FF7B72"}},"?:"),(0,e._)("span",{style:{color:"#C9D1D9"}},"object,options"),(0,e._)("span",{style:{color:"#FF7B72"}},"?:"),(0,e._)("span",{style:{color:"#C9D1D9"}},"TviewOptions);")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#C9D1D9"}},"ctx."),(0,e._)("span",{style:{color:"#D2A8FF"}},"reactView"),(0,e._)("span",{style:{color:"#C9D1D9"}},"(viewName:string,initProps"),(0,e._)("span",{style:{color:"#FF7B72"}},"?:"),(0,e._)("span",{style:{color:"#C9D1D9"}},"object,options"),(0,e._)("span",{style:{color:"#FF7B72"}},"?:"),(0,e._)("span",{style:{color:"#C9D1D9"}},"TviewOptions);")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"})])]),(0,e._)("div",{class:"line-numbers"},[(0,e._)("span",{class:"line-number"},"1"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"2"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"3"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"4"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"5"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"6"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"7"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"8"),(0,e._)("br")])],-1),H=(0,e._)("p",null,[(0,e._)("em",null,"如果 options 参数传递为空 则默认会使用全局配置属性，全局配置采用插件集成时传递的 options 参数")],-1),I=(0,e._)("p",null,[(0,e._)("strong",null,"注意"),(0,e.Uk)(),(0,e._)("code",null,"cache"),(0,e.Uk)("只在"),(0,e._)("code",null,"生产环境"),(0,e.Uk)("开启有效。")],-1),L=(0,e._)("h2",{id:"_9、controller中使用",tabindex:"-1"},[(0,e._)("a",{class:"header-anchor",href:"#_9、controller中使用","aria-hidden":"true"},"#"),(0,e.Uk)(" 9、"),(0,e._)("strong",null,"controller"),(0,e.Uk)("中使用")],-1),Z=(0,e._)("div",{class:"language-typescript ext-ts line-numbers-mode"},[(0,e._)("pre",{class:"shiki",style:{"background-color":"#0d1117"}},[(0,e._)("code",null,[(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#FF7B72"}},"import"),(0,e._)("span",{style:{color:"#C9D1D9"}}," { BaseController, Path } "),(0,e._)("span",{style:{color:"#FF7B72"}},"from"),(0,e._)("span",{style:{color:"#C9D1D9"}}," "),(0,e._)("span",{style:{color:"#A5D6FF"}},"'@umajs/core'")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#FF7B72"}},"import"),(0,e._)("span",{style:{color:"#C9D1D9"}}," { Result } "),(0,e._)("span",{style:{color:"#FF7B72"}},"from"),(0,e._)("span",{style:{color:"#C9D1D9"}}," "),(0,e._)("span",{style:{color:"#A5D6FF"}},"'@umajs/plugin-react-ssr'")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"}),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#FF7B72"}},"export"),(0,e._)("span",{style:{color:"#FFA657"}}," "),(0,e._)("span",{style:{color:"#FF7B72"}},"default"),(0,e._)("span",{style:{color:"#FFA657"}}," "),(0,e._)("span",{style:{color:"#FF7B72"}},"class"),(0,e._)("span",{style:{color:"#FFA657"}}," Index "),(0,e._)("span",{style:{color:"#FF7B72"}},"extends"),(0,e._)("span",{style:{color:"#FFA657"}}," "),(0,e._)("span",{style:{color:"#79C0FF"}},"BaseController"),(0,e._)("span",{style:{color:"#FFA657"}}," {")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#FFA657"}},"  @"),(0,e._)("span",{style:{color:"#D2A8FF"}},"Path"),(0,e._)("span",{style:{color:"#FFA657"}},"("),(0,e._)("span",{style:{color:"#A5D6FF"}},"'/'"),(0,e._)("span",{style:{color:"#FFA657"}},")")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#FFA657"}},"  "),(0,e._)("span",{style:{color:"#D2A8FF"}},"index"),(0,e._)("span",{style:{color:"#FFA657"}},"() "),(0,e._)("span",{style:{color:"#C9D1D9"}},"{")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#C9D1D9"}},"    "),(0,e._)("span",{style:{color:"#FF7B72"}},"return"),(0,e._)("span",{style:{color:"#C9D1D9"}}," Result."),(0,e._)("span",{style:{color:"#D2A8FF"}},"reactView"),(0,e._)("span",{style:{color:"#C9D1D9"}},"(")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#C9D1D9"}},"      "),(0,e._)("span",{style:{color:"#A5D6FF"}},"'home'"),(0,e._)("span",{style:{color:"#C9D1D9"}},",")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#C9D1D9"}},"      { say: "),(0,e._)("span",{style:{color:"#A5D6FF"}},"'hi,I am a ReactView'"),(0,e._)("span",{style:{color:"#C9D1D9"}}," },")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#C9D1D9"}},"      { cache: "),(0,e._)("span",{style:{color:"#79C0FF"}},"true"),(0,e._)("span",{style:{color:"#C9D1D9"}}," }")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#C9D1D9"}},"    )")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#C9D1D9"}},"  }")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#FFA657"}},"}")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"})])]),(0,e._)("div",{class:"line-numbers"},[(0,e._)("span",{class:"line-number"},"1"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"2"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"3"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"4"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"5"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"6"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"7"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"8"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"9"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"10"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"11"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"12"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"13"),(0,e._)("br")])],-1),Q=(0,e._)("h2",{id:"_10、middleware中使用",tabindex:"-1"},[(0,e._)("a",{class:"header-anchor",href:"#_10、middleware中使用","aria-hidden":"true"},"#"),(0,e.Uk)(" 10、"),(0,e._)("strong",null,"middleware"),(0,e.Uk)("中使用")],-1),Y=(0,e._)("blockquote",null,[(0,e._)("p",null,"对于中间件的使用，引入顺序需要在插件之后。")],-1),J=(0,e._)("div",{class:"language-javascript ext-js line-numbers-mode"},[(0,e._)("pre",{class:"shiki",style:{"background-color":"#0d1117"}},[(0,e._)("code",null,[(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#C9D1D9"}},";"),(0,e._)("span",{style:{color:"#FF7B72"}},"async"),(0,e._)("span",{style:{color:"#C9D1D9"}}," ("),(0,e._)("span",{style:{color:"#FFA657"}},"ctx"),(0,e._)("span",{style:{color:"#C9D1D9"}},", "),(0,e._)("span",{style:{color:"#FFA657"}},"next"),(0,e._)("span",{style:{color:"#C9D1D9"}},") "),(0,e._)("span",{style:{color:"#FF7B72"}},"=>"),(0,e._)("span",{style:{color:"#C9D1D9"}}," {")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#C9D1D9"}},"  "),(0,e._)("span",{style:{color:"#FF7B72"}},"try"),(0,e._)("span",{style:{color:"#C9D1D9"}}," {")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#C9D1D9"}},"    "),(0,e._)("span",{style:{color:"#FF7B72"}},"await"),(0,e._)("span",{style:{color:"#C9D1D9"}}," "),(0,e._)("span",{style:{color:"#D2A8FF"}},"next"),(0,e._)("span",{style:{color:"#C9D1D9"}},"()")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#C9D1D9"}},"  } "),(0,e._)("span",{style:{color:"#FF7B72"}},"catch"),(0,e._)("span",{style:{color:"#C9D1D9"}}," (e) {")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#C9D1D9"}},"    "),(0,e._)("span",{style:{color:"#FF7B72"}},"return"),(0,e._)("span",{style:{color:"#C9D1D9"}}," ctx."),(0,e._)("span",{style:{color:"#D2A8FF"}},"reactView"),(0,e._)("span",{style:{color:"#C9D1D9"}},"("),(0,e._)("span",{style:{color:"#A5D6FF"}},"'error'"),(0,e._)("span",{style:{color:"#C9D1D9"}},", { msg: e.stack }, { cache: "),(0,e._)("span",{style:{color:"#79C0FF"}},"false"),(0,e._)("span",{style:{color:"#C9D1D9"}}," })")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#C9D1D9"}},"  }")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#C9D1D9"}},"}")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"})])]),(0,e._)("div",{class:"line-numbers"},[(0,e._)("span",{class:"line-number"},"1"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"2"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"3"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"4"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"5"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"6"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"7"),(0,e._)("br")])],-1),$=(0,e._)("h2",{id:"_11、客户端嵌套路由-react-router",tabindex:"-1"},[(0,e._)("a",{class:"header-anchor",href:"#_11、客户端嵌套路由-react-router","aria-hidden":"true"},"#"),(0,e.Uk)(" 11、"),(0,e._)("strong",null,"客户端嵌套路由（react-router）")],-1),G=(0,e._)("blockquote",null,[(0,e._)("p",null,"在页面组件中使用 react-router 时，只能在 controller 中使用，切需要服务端对路由做支持。框架默认集成了 BrowserRouter，无需开发者在页面组件中引入")],-1),K=(0,e._)("div",{class:"language-javascript ext-js line-numbers-mode"},[(0,e._)("pre",{class:"shiki",style:{"background-color":"#0d1117"}},[(0,e._)("code",null,[(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#8B949E"}},"// 页面组件 web/home/index.js")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#FF7B72"}},"export"),(0,e._)("span",{style:{color:"#FFA657"}}," "),(0,e._)("span",{style:{color:"#FF7B72"}},"default"),(0,e._)("span",{style:{color:"#FFA657"}}," "),(0,e._)("span",{style:{color:"#FF7B72"}},"class"),(0,e._)("span",{style:{color:"#FFA657"}}," APP "),(0,e._)("span",{style:{color:"#FF7B72"}},"extends"),(0,e._)("span",{style:{color:"#FFA657"}}," "),(0,e._)("span",{style:{color:"#79C0FF"}},"Component"),(0,e._)("span",{style:{color:"#FFA657"}}," {")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#FFA657"}},"    "),(0,e._)("span",{style:{color:"#D2A8FF"}},"render"),(0,e._)("span",{style:{color:"#FFA657"}},"() "),(0,e._)("span",{style:{color:"#C9D1D9"}},"{")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#C9D1D9"}},"        "),(0,e._)("span",{style:{color:"#FF7B72"}},"return"),(0,e._)("span",{style:{color:"#C9D1D9"}}," (")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#C9D1D9"}},"            <"),(0,e._)("span",{style:{color:"#7EE787"}},"Switch"),(0,e._)("span",{style:{color:"#C9D1D9"}},">")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#C9D1D9"}},"                <"),(0,e._)("span",{style:{color:"#7EE787"}},"Route"),(0,e._)("span",{style:{color:"#C9D1D9"}}," "),(0,e._)("span",{style:{color:"#79C0FF"}},"exact"),(0,e._)("span",{style:{color:"#C9D1D9"}}," "),(0,e._)("span",{style:{color:"#79C0FF"}},"path"),(0,e._)("span",{style:{color:"#FF7B72"}},"="),(0,e._)("span",{style:{color:"#A5D6FF"}},'"/"'),(0,e._)("span",{style:{color:"#C9D1D9"}}," "),(0,e._)("span",{style:{color:"#79C0FF"}},"component"),(0,e._)("span",{style:{color:"#FF7B72"}},"="),(0,e._)("span",{style:{color:"#C9D1D9"}},"{Home} />")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#C9D1D9"}},"                <"),(0,e._)("span",{style:{color:"#7EE787"}},"Route"),(0,e._)("span",{style:{color:"#C9D1D9"}}," "),(0,e._)("span",{style:{color:"#79C0FF"}},"exact"),(0,e._)("span",{style:{color:"#C9D1D9"}}," "),(0,e._)("span",{style:{color:"#79C0FF"}},"path"),(0,e._)("span",{style:{color:"#FF7B72"}},"="),(0,e._)("span",{style:{color:"#A5D6FF"}},'"/about"'),(0,e._)("span",{style:{color:"#C9D1D9"}}," "),(0,e._)("span",{style:{color:"#79C0FF"}},"component"),(0,e._)("span",{style:{color:"#FF7B72"}},"="),(0,e._)("span",{style:{color:"#C9D1D9"}},"{About} />")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#C9D1D9"}},"                <"),(0,e._)("span",{style:{color:"#7EE787"}},"Route"),(0,e._)("span",{style:{color:"#C9D1D9"}}," "),(0,e._)("span",{style:{color:"#79C0FF"}},"exact"),(0,e._)("span",{style:{color:"#C9D1D9"}}," "),(0,e._)("span",{style:{color:"#79C0FF"}},"path"),(0,e._)("span",{style:{color:"#FF7B72"}},"="),(0,e._)("span",{style:{color:"#A5D6FF"}},'"/about/:msg"'),(0,e._)("span",{style:{color:"#C9D1D9"}}," "),(0,e._)("span",{style:{color:"#79C0FF"}},"component"),(0,e._)("span",{style:{color:"#FF7B72"}},"="),(0,e._)("span",{style:{color:"#C9D1D9"}},"{About} />")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#C9D1D9"}},"                <"),(0,e._)("span",{style:{color:"#7EE787"}},"Route"),(0,e._)("span",{style:{color:"#C9D1D9"}}," "),(0,e._)("span",{style:{color:"#79C0FF"}},"component"),(0,e._)("span",{style:{color:"#FF7B72"}},"="),(0,e._)("span",{style:{color:"#C9D1D9"}},"{Home} />")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#C9D1D9"}},"            </"),(0,e._)("span",{style:{color:"#7EE787"}},"Switch"),(0,e._)("span",{style:{color:"#C9D1D9"}},">")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#C9D1D9"}},"        );")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#C9D1D9"}},"    }")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#FFA657"}},"}")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"}),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#8B949E"}},"// 服务端路由 前后端路由规则必须保持一致。")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#C9D1D9"}},"@"),(0,e._)("span",{style:{color:"#D2A8FF"}},"Path"),(0,e._)("span",{style:{color:"#C9D1D9"}},"("),(0,e._)("span",{style:{color:"#A5D6FF"}},'"/home"'),(0,e._)("span",{style:{color:"#C9D1D9"}},","),(0,e._)("span",{style:{color:"#A5D6FF"}},'"/home/:path"'),(0,e._)("span",{style:{color:"#C9D1D9"}},")")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#D2A8FF"}},"browserRouter"),(0,e._)("span",{style:{color:"#C9D1D9"}},"() {")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#C9D1D9"}},"    "),(0,e._)("span",{style:{color:"#FF7B72"}},"return"),(0,e._)("span",{style:{color:"#C9D1D9"}}," Result."),(0,e._)("span",{style:{color:"#D2A8FF"}},"reactView"),(0,e._)("span",{style:{color:"#C9D1D9"}},"("),(0,e._)("span",{style:{color:"#A5D6FF"}},"'home'"),(0,e._)("span",{style:{color:"#C9D1D9"}},",{say:"),(0,e._)("span",{style:{color:"#A5D6FF"}},'"hi,I am a ReactView"'),(0,e._)("span",{style:{color:"#C9D1D9"}},"},{cache:"),(0,e._)("span",{style:{color:"#79C0FF"}},"true"),(0,e._)("span",{style:{color:"#C9D1D9"}},",baseName:"),(0,e._)("span",{style:{color:"#A5D6FF"}},"'home'"),(0,e._)("span",{style:{color:"#C9D1D9"}},"});")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#C9D1D9"}},"}")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"})])]),(0,e._)("div",{class:"line-numbers"},[(0,e._)("span",{class:"line-number"},"1"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"2"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"3"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"4"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"5"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"6"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"7"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"8"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"9"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"10"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"11"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"12"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"13"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"14"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"15"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"16"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"17"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"18"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"19"),(0,e._)("br")])],-1),X=(0,e._)("p",null,[(0,e._)("strong",null,[(0,e.Uk)("注："),(0,e._)("code",null,"baseName"),(0,e.Uk)("默认为页面组件标识名称。和 pages 下的页面文件名称保持一致，当服务端根路由和文件名称不一致时，需要给插件传递"),(0,e._)("code",null,"baseName"),(0,e.Uk)("属性，以确保服务端和客户端根路由一致。")])],-1),ss=(0,e._)("h2",{id:"_12、seo-和自定义-html",tabindex:"-1"},[(0,e._)("a",{class:"header-anchor",href:"#_12、seo-和自定义-html","aria-hidden":"true"},"#"),(0,e.Uk)(" 12、"),(0,e._)("strong",null,"SEO 和自定义 HTML")],-1),ls=(0,e.Uk)("在 SEO 场景时，需要动态修改页面的标题和关键字等信息时，我们可以在自定义 html 中使用模板引擎语法，使用模板引擎时需要先开启使用"),ns=(0,e._)("code",null,"@umajs/plugin-views",-1),es=(0,e.Uk)("插件并设置"),as=(0,e._)("code",null,"useEngine:true",-1),os=(0,e.Uk)(";建议和"),rs=(0,e._)("code",null,"nunjucks",-1),cs=(0,e.Uk)("搭配使用。"),_s={href:"https://github.com/Umajs/umajs-react-ssr/tree/master/web/pages/template",target:"_blank",rel:"noopener noreferrer"},ts=(0,e.Uk)("参考 demo"),ps=(0,e.Uk)("。"),is=(0,e._)("ul",null,[(0,e._)("li",null,"插件配置")],-1),Ds=(0,e._)("div",{class:"language-javascript ext-js line-numbers-mode"},[(0,e._)("pre",{class:"shiki",style:{"background-color":"#0d1117"}},[(0,e._)("code",null,[(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#8B949E"}},"// plugin.config.ts")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#FFA657"}},"views"),(0,e._)("span",{style:{color:"#C9D1D9"}},": {")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#C9D1D9"}},"        "),(0,e._)("span",{style:{color:"#FFA657"}},"enable"),(0,e._)("span",{style:{color:"#C9D1D9"}},": "),(0,e._)("span",{style:{color:"#79C0FF"}},"true"),(0,e._)("span",{style:{color:"#C9D1D9"}},",")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#C9D1D9"}},"        "),(0,e._)("span",{style:{color:"#FFA657"}},"name"),(0,e._)("span",{style:{color:"#C9D1D9"}},": "),(0,e._)("span",{style:{color:"#A5D6FF"}},"'views'"),(0,e._)("span",{style:{color:"#C9D1D9"}},",")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#C9D1D9"}},"        "),(0,e._)("span",{style:{color:"#FFA657"}},"options"),(0,e._)("span",{style:{color:"#C9D1D9"}},": {")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#C9D1D9"}},"            "),(0,e._)("span",{style:{color:"#FFA657"}},"root"),(0,e._)("span",{style:{color:"#C9D1D9"}},": "),(0,e._)("span",{style:{color:"#A5D6FF"}},"`${"),(0,e._)("span",{style:{color:"#C9D1D9"}},"process"),(0,e._)("span",{style:{color:"#A5D6FF"}},"."),(0,e._)("span",{style:{color:"#D2A8FF"}},"cwd"),(0,e._)("span",{style:{color:"#A5D6FF"}},"()"),(0,e._)("span",{style:{color:"#A5D6FF"}},"}/views`"),(0,e._)("span",{style:{color:"#C9D1D9"}},",")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#C9D1D9"}},"            "),(0,e._)("span",{style:{color:"#FFA657"}},"autoRender"),(0,e._)("span",{style:{color:"#C9D1D9"}},":"),(0,e._)("span",{style:{color:"#79C0FF"}},"true"),(0,e._)("span",{style:{color:"#C9D1D9"}},",")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#C9D1D9"}},"            "),(0,e._)("span",{style:{color:"#FFA657"}},"opts"),(0,e._)("span",{style:{color:"#C9D1D9"}},": {")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#C9D1D9"}},"                "),(0,e._)("span",{style:{color:"#FFA657"}},"map"),(0,e._)("span",{style:{color:"#C9D1D9"}},": { "),(0,e._)("span",{style:{color:"#FFA657"}},"html"),(0,e._)("span",{style:{color:"#C9D1D9"}},": "),(0,e._)("span",{style:{color:"#A5D6FF"}},"'nunjucks'"),(0,e._)("span",{style:{color:"#C9D1D9"}}," },")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#C9D1D9"}},"            },")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#C9D1D9"}},"        },")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#C9D1D9"}},"    },")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"})])]),(0,e._)("div",{class:"line-numbers"},[(0,e._)("span",{class:"line-number"},"1"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"2"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"3"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"4"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"5"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"6"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"7"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"8"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"9"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"10"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"11"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"12"),(0,e._)("br")])],-1),ys=(0,e._)("ul",null,[(0,e._)("li",null,"设置 useEngine")],-1),us=(0,e._)("div",{class:"language-typescript ext-ts line-numbers-mode"},[(0,e._)("pre",{class:"shiki",style:{"background-color":"#0d1117"}},[(0,e._)("code",null,[(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#8B949E"}},"// src/index.controller")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#8B949E"}},"//调用时开启使用模板引擎标识，为提高性能，对未动态修改模板数据的页面组件不要设置此属性")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#C9D1D9"}},"Result."),(0,e._)("span",{style:{color:"#D2A8FF"}},"reactView"),(0,e._)("span",{style:{color:"#C9D1D9"}},"(")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#C9D1D9"}},"  "),(0,e._)("span",{style:{color:"#A5D6FF"}},"'index'"),(0,e._)("span",{style:{color:"#C9D1D9"}},",")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#C9D1D9"}},"  { msg: "),(0,e._)("span",{style:{color:"#A5D6FF"}},"'This is the template text！'"),(0,e._)("span",{style:{color:"#C9D1D9"}},", title: "),(0,e._)("span",{style:{color:"#A5D6FF"}},"'hi,umajs-react-ssr'"),(0,e._)("span",{style:{color:"#C9D1D9"}}," },")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#C9D1D9"}},"  { cache: "),(0,e._)("span",{style:{color:"#79C0FF"}},"false"),(0,e._)("span",{style:{color:"#C9D1D9"}},", useEngine: "),(0,e._)("span",{style:{color:"#79C0FF"}},"true"),(0,e._)("span",{style:{color:"#C9D1D9"}}," }")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#C9D1D9"}},")")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"})])]),(0,e._)("div",{class:"line-numbers"},[(0,e._)("span",{class:"line-number"},"1"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"2"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"3"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"4"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"5"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"6"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"7"),(0,e._)("br")])],-1),Fs=(0,e._)("ul",null,[(0,e._)("li",null,"模板")],-1),bs=(0,e.Uk)("框架内置 HTMLWebpackPlugin 插件，开发者在页面组件同级目录下可以覆盖默认 html 模板自定义引入第三方资源和脚本。 更多规则使用请看"),ms={href:"https://github.com/dazjean/Srejs/blob/mian/doc/htmlTemplate.md",target:"_blank",rel:"noopener noreferrer"},ds=(0,e.Uk)("自定义 HTML"),Cs=(0,e._)("div",{class:"language-html ext-html line-numbers-mode"},[(0,e._)("pre",{class:"shiki",style:{"background-color":"#0d1117"}},[(0,e._)("code",null,[(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#8B949E"}},"\x3c!-- web/pages/index/index.html --\x3e")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#C9D1D9"}},"<!"),(0,e._)("span",{style:{color:"#7EE787"}},"DOCTYPE"),(0,e._)("span",{style:{color:"#C9D1D9"}}," "),(0,e._)("span",{style:{color:"#79C0FF"}},"html"),(0,e._)("span",{style:{color:"#C9D1D9"}},">")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#C9D1D9"}},"<"),(0,e._)("span",{style:{color:"#7EE787"}},"html"),(0,e._)("span",{style:{color:"#C9D1D9"}},">")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#C9D1D9"}},"  <"),(0,e._)("span",{style:{color:"#7EE787"}},"head"),(0,e._)("span",{style:{color:"#C9D1D9"}},">")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#C9D1D9"}},"    <"),(0,e._)("span",{style:{color:"#7EE787"}},"meta"),(0,e._)("span",{style:{color:"#C9D1D9"}}," "),(0,e._)("span",{style:{color:"#79C0FF"}},"http-equiv"),(0,e._)("span",{style:{color:"#C9D1D9"}},"="),(0,e._)("span",{style:{color:"#A5D6FF"}},'"Content-Type"'),(0,e._)("span",{style:{color:"#C9D1D9"}}," "),(0,e._)("span",{style:{color:"#79C0FF"}},"content"),(0,e._)("span",{style:{color:"#C9D1D9"}},"="),(0,e._)("span",{style:{color:"#A5D6FF"}},'"text/html; charset=UTF-8"'),(0,e._)("span",{style:{color:"#C9D1D9"}}," />")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#C9D1D9"}},"    <"),(0,e._)("span",{style:{color:"#7EE787"}},"meta"),(0,e._)("span",{style:{color:"#C9D1D9"}}," "),(0,e._)("span",{style:{color:"#79C0FF"}},"charset"),(0,e._)("span",{style:{color:"#C9D1D9"}},"="),(0,e._)("span",{style:{color:"#A5D6FF"}},'"utf-8"'),(0,e._)("span",{style:{color:"#C9D1D9"}}," />")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#C9D1D9"}},"    <"),(0,e._)("span",{style:{color:"#7EE787"}},"meta")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#C9D1D9"}},"      "),(0,e._)("span",{style:{color:"#79C0FF"}},"name"),(0,e._)("span",{style:{color:"#C9D1D9"}},"="),(0,e._)("span",{style:{color:"#A5D6FF"}},'"viewport"')]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#C9D1D9"}},"      "),(0,e._)("span",{style:{color:"#79C0FF"}},"content"),(0,e._)("span",{style:{color:"#C9D1D9"}},"="),(0,e._)("span",{style:{color:"#A5D6FF"}},'"initial-scale=1.0,maximum-scale=1.0,minimum-scale=1.0,user-scalable=0,width=device-width"')]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#C9D1D9"}},"    />")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#C9D1D9"}},"    <"),(0,e._)("span",{style:{color:"#7EE787"}},"meta"),(0,e._)("span",{style:{color:"#C9D1D9"}}," "),(0,e._)("span",{style:{color:"#79C0FF"}},"name"),(0,e._)("span",{style:{color:"#C9D1D9"}},"="),(0,e._)("span",{style:{color:"#A5D6FF"}},'"format-detection"'),(0,e._)("span",{style:{color:"#C9D1D9"}}," "),(0,e._)("span",{style:{color:"#79C0FF"}},"content"),(0,e._)("span",{style:{color:"#C9D1D9"}},"="),(0,e._)("span",{style:{color:"#A5D6FF"}},'"telephone=no"'),(0,e._)("span",{style:{color:"#C9D1D9"}}," />")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#C9D1D9"}},"    <"),(0,e._)("span",{style:{color:"#7EE787"}},"meta"),(0,e._)("span",{style:{color:"#C9D1D9"}}," "),(0,e._)("span",{style:{color:"#79C0FF"}},"name"),(0,e._)("span",{style:{color:"#C9D1D9"}},"="),(0,e._)("span",{style:{color:"#A5D6FF"}},'"format-detection"'),(0,e._)("span",{style:{color:"#C9D1D9"}}," "),(0,e._)("span",{style:{color:"#79C0FF"}},"content"),(0,e._)("span",{style:{color:"#C9D1D9"}},"="),(0,e._)("span",{style:{color:"#A5D6FF"}},'"email=no"'),(0,e._)("span",{style:{color:"#C9D1D9"}}," />")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#C9D1D9"}},"    <"),(0,e._)("span",{style:{color:"#7EE787"}},"meta"),(0,e._)("span",{style:{color:"#C9D1D9"}}," "),(0,e._)("span",{style:{color:"#79C0FF"}},"name"),(0,e._)("span",{style:{color:"#C9D1D9"}},"="),(0,e._)("span",{style:{color:"#A5D6FF"}},'"format-detection"'),(0,e._)("span",{style:{color:"#C9D1D9"}}," "),(0,e._)("span",{style:{color:"#79C0FF"}},"content"),(0,e._)("span",{style:{color:"#C9D1D9"}},"="),(0,e._)("span",{style:{color:"#A5D6FF"}},'"address=no;"'),(0,e._)("span",{style:{color:"#C9D1D9"}}," />")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#C9D1D9"}},"    <"),(0,e._)("span",{style:{color:"#7EE787"}},"meta"),(0,e._)("span",{style:{color:"#C9D1D9"}}," "),(0,e._)("span",{style:{color:"#79C0FF"}},"name"),(0,e._)("span",{style:{color:"#C9D1D9"}},"="),(0,e._)("span",{style:{color:"#A5D6FF"}},'"apple-mobile-web-app-capable"'),(0,e._)("span",{style:{color:"#C9D1D9"}}," "),(0,e._)("span",{style:{color:"#79C0FF"}},"content"),(0,e._)("span",{style:{color:"#C9D1D9"}},"="),(0,e._)("span",{style:{color:"#A5D6FF"}},'"yes"'),(0,e._)("span",{style:{color:"#C9D1D9"}}," />")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#C9D1D9"}},"    <"),(0,e._)("span",{style:{color:"#7EE787"}},"meta"),(0,e._)("span",{style:{color:"#C9D1D9"}}," "),(0,e._)("span",{style:{color:"#79C0FF"}},"name"),(0,e._)("span",{style:{color:"#C9D1D9"}},"="),(0,e._)("span",{style:{color:"#A5D6FF"}},'"apple-mobile-web-app-status-bar-style"'),(0,e._)("span",{style:{color:"#C9D1D9"}}," "),(0,e._)("span",{style:{color:"#79C0FF"}},"content"),(0,e._)("span",{style:{color:"#C9D1D9"}},"="),(0,e._)("span",{style:{color:"#A5D6FF"}},'"default"'),(0,e._)("span",{style:{color:"#C9D1D9"}}," />")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#C9D1D9"}},"    <"),(0,e._)("span",{style:{color:"#7EE787"}},"meta"),(0,e._)("span",{style:{color:"#C9D1D9"}}," "),(0,e._)("span",{style:{color:"#79C0FF"}},"name"),(0,e._)("span",{style:{color:"#C9D1D9"}},"="),(0,e._)("span",{style:{color:"#A5D6FF"}},'"keywords"'),(0,e._)("span",{style:{color:"#C9D1D9"}}," "),(0,e._)("span",{style:{color:"#79C0FF"}},"content"),(0,e._)("span",{style:{color:"#C9D1D9"}},"="),(0,e._)("span",{style:{color:"#A5D6FF"}},'"{{msg}}"'),(0,e._)("span",{style:{color:"#C9D1D9"}}," />")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#C9D1D9"}},"    <"),(0,e._)("span",{style:{color:"#7EE787"}},"title"),(0,e._)("span",{style:{color:"#C9D1D9"}},">{{title}}</"),(0,e._)("span",{style:{color:"#7EE787"}},"title"),(0,e._)("span",{style:{color:"#C9D1D9"}},">")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#C9D1D9"}},"    "),(0,e._)("span",{style:{color:"#8B949E"}},"\x3c!-- 引入第三方组件库样式 --\x3e")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#C9D1D9"}},"  </"),(0,e._)("span",{style:{color:"#7EE787"}},"head"),(0,e._)("span",{style:{color:"#C9D1D9"}},">")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#C9D1D9"}},"  <"),(0,e._)("span",{style:{color:"#7EE787"}},"body"),(0,e._)("span",{style:{color:"#C9D1D9"}},">")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#C9D1D9"}},"    <"),(0,e._)("span",{style:{color:"#7EE787"}},"div"),(0,e._)("span",{style:{color:"#C9D1D9"}}," "),(0,e._)("span",{style:{color:"#79C0FF"}},"id"),(0,e._)("span",{style:{color:"#C9D1D9"}},"="),(0,e._)("span",{style:{color:"#A5D6FF"}},'"app"'),(0,e._)("span",{style:{color:"#C9D1D9"}},"></"),(0,e._)("span",{style:{color:"#7EE787"}},"div"),(0,e._)("span",{style:{color:"#C9D1D9"}},">")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#C9D1D9"}},"    "),(0,e._)("span",{style:{color:"#8B949E"}},"\x3c!-- 引入第三方sdk脚本 --\x3e")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#C9D1D9"}},"  </"),(0,e._)("span",{style:{color:"#7EE787"}},"body"),(0,e._)("span",{style:{color:"#C9D1D9"}},">")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#C9D1D9"}},"</"),(0,e._)("span",{style:{color:"#7EE787"}},"html"),(0,e._)("span",{style:{color:"#C9D1D9"}},">")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"})])]),(0,e._)("div",{class:"line-numbers"},[(0,e._)("span",{class:"line-number"},"1"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"2"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"3"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"4"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"5"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"6"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"7"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"8"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"9"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"10"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"11"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"12"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"13"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"14"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"15"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"16"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"17"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"18"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"19"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"20"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"21"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"22"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"23"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"24"),(0,e._)("br")])],-1),ks=(0,e._)("h2",{id:"_13、生产部署",tabindex:"-1"},[(0,e._)("a",{class:"header-anchor",href:"#_13、生产部署","aria-hidden":"true"},"#"),(0,e.Uk)(" 13、生产部署")],-1),Us=(0,e._)("blockquote",null,[(0,e._)("p",null,[(0,e.Uk)("在部署生产环境之前，客户端代码需要提前编译。否则线上首次访问时会耗时比较长，影响用户体验。编译脚本命令为"),(0,e._)("code",null,"npx srejs build")])],-1),hs=(0,e._)("div",{class:"language-javascript ext-js line-numbers-mode"},[(0,e._)("pre",{class:"shiki",style:{"background-color":"#0d1117"}},[(0,e._)("code",null,[(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#A5D6FF"}},'"scripts"'),(0,e._)("span",{style:{color:"#C9D1D9"}},": {")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#C9D1D9"}},"    "),(0,e._)("span",{style:{color:"#A5D6FF"}},'"dev"'),(0,e._)("span",{style:{color:"#C9D1D9"}},": "),(0,e._)("span",{style:{color:"#A5D6FF"}},'"ts-node-dev --respawn src/app.ts"'),(0,e._)("span",{style:{color:"#C9D1D9"}},",")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#C9D1D9"}},"    "),(0,e._)("span",{style:{color:"#A5D6FF"}},'"build"'),(0,e._)("span",{style:{color:"#C9D1D9"}},": "),(0,e._)("span",{style:{color:"#A5D6FF"}},'"tsc && npx srejs build"'),(0,e._)("span",{style:{color:"#C9D1D9"}},",")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#C9D1D9"}},"    "),(0,e._)("span",{style:{color:"#A5D6FF"}},'"prepublish"'),(0,e._)("span",{style:{color:"#C9D1D9"}},": "),(0,e._)("span",{style:{color:"#A5D6FF"}},'"npm run build"'),(0,e._)("span",{style:{color:"#C9D1D9"}},",")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#C9D1D9"}},"    "),(0,e._)("span",{style:{color:"#A5D6FF"}},'"prod"'),(0,e._)("span",{style:{color:"#C9D1D9"}},": "),(0,e._)("span",{style:{color:"#A5D6FF"}},'"node app/app.js --production"')]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"},[(0,e._)("span",{style:{color:"#C9D1D9"}},"  },")]),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"}),(0,e.Uk)("\n"),(0,e._)("span",{class:"line"})])]),(0,e._)("div",{class:"line-numbers"},[(0,e._)("span",{class:"line-number"},"1"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"2"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"3"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"4"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"5"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"6"),(0,e._)("br"),(0,e._)("span",{class:"line-number"},"7"),(0,e._)("br")])],-1),gs=(0,e.Uk)("源码请查看"),As={href:"https://github.com/Umajs/plugin-react-ssr",target:"_blank",rel:"noopener noreferrer"},Es=(0,e._)("code",null,"@umajs/plugin-react-ssr",-1),Bs=(0,e.Uk)(" 和 "),xs={href:"https://github.com/dazjean/Srejs",target:"_blank",rel:"noopener noreferrer"},vs=(0,e._)("code",null,"Srejs",-1),js=(0,e.Uk)(" 欢迎 Star 和提供使用反馈。"),fs=(0,e._)("h2",{id:"_14、案例",tabindex:"-1"},[(0,e._)("a",{class:"header-anchor",href:"#_14、案例","aria-hidden":"true"},"#"),(0,e.Uk)(" 14、案例")],-1),ws={href:"https://github.com/dazjean/Srejs/tree/mian/example/uma-css-module",target:"_blank",rel:"noopener noreferrer"},Rs=(0,e.Uk)("uma-css-module"),Ss={href:"https://github.com/dazjean/Srejs/tree/mian/example/uma-react-redux",target:"_blank",rel:"noopener noreferrer"},Ts=(0,e.Uk)("uma-react-redux"),Ps={href:"https://github.com/dazjean/Srejs/tree/mian/example/uma-useContext-useReducer",target:"_blank",rel:"noopener noreferrer"},qs=(0,e.Uk)("uma-useContext-useReducer"),zs=(0,e._)("h2",{id:"_15、faq",tabindex:"-1"},[(0,e._)("a",{class:"header-anchor",href:"#_15、faq","aria-hidden":"true"},"#"),(0,e.Uk)(" 15、FAQ")],-1),Ns=(0,e._)("ul",null,[(0,e._)("li",null,[(0,e.Uk)("引入插件后启动项目报错"),(0,e._)("code",null,"TypeError:Cannot read property 'ROOT' of undefined"),(0,e._)("img",{src:a,alt:"image"})])],-1),Os=(0,e._)("blockquote",null,[(0,e._)("p",null,[(0,e.Uk)("此问题为项目"),(0,e._)("code",null,"@umajs/core"),(0,e.Uk)("版本冲突导致，解决方案为升级项目所依赖的包版本号，确保项目依赖的包版本号"),(0,e._)("strong",null,"大于或者等于"),(0,e._)("code",null,"@umajs/plugin-react-ssr"),(0,e.Uk)("所依赖的"),(0,e._)("code",null,"@umajs/core"),(0,e.Uk)("版本号")])],-1),Ws={},Vs=(0,n(4110).Z)(Ws,[["render",function(s,l){const n=(0,e.up)("OutboundLink");return(0,e.wg)(),(0,e.iD)(e.HY,null,[o,(0,e._)("blockquote",null,[(0,e._)("p",null,[r,c,(0,e._)("a",_,[t,(0,e.Wm)(n)]),p,(0,e._)("a",i,[D,(0,e.Wm)(n)]),y,u,F,b,m,d,C,k,U])]),h,g,A,E,B,x,v,j,f,w,R,S,T,P,q,z,N,O,W,V,M,H,I,L,Z,Q,Y,J,$,G,K,X,ss,(0,e._)("blockquote",null,[(0,e._)("p",null,[ls,ns,es,as,os,rs,cs,(0,e._)("a",_s,[ts,(0,e.Wm)(n)]),ps])]),is,Ds,ys,us,Fs,(0,e._)("blockquote",null,[(0,e._)("p",null,[bs,(0,e._)("a",ms,[ds,(0,e.Wm)(n)])])]),Cs,ks,Us,hs,(0,e._)("p",null,[(0,e._)("strong",null,[gs,(0,e._)("a",As,[Es,(0,e.Wm)(n)]),Bs,(0,e._)("a",xs,[vs,(0,e.Wm)(n)]),js])]),fs,(0,e._)("ul",null,[(0,e._)("li",null,[(0,e._)("a",ws,[Rs,(0,e.Wm)(n)])]),(0,e._)("li",null,[(0,e._)("a",Ss,[Ts,(0,e.Wm)(n)])]),(0,e._)("li",null,[(0,e._)("a",Ps,[qs,(0,e.Wm)(n)])])]),zs,Ns,Os],64)}]])},5708:(s,l,n)=>{n.r(l),n.d(l,{data:()=>e});const e={key:"v-5843c8da",path:"/%E6%9C%8D%E5%8A%A1%E7%AB%AF%E6%B8%B2%E6%9F%93/React-ssr.html",title:"umajs-react-ssr",lang:"zh-CN",frontmatter:{head:[["meta",{property:"og:url",content:"/%E6%9C%8D%E5%8A%A1%E7%AB%AF%E6%B8%B2%E6%9F%93/React-ssr.html"}],["meta",{property:"og:site_name",content:"UMajs"}],["meta",{property:"og:title",content:"umajs-react-ssr"}],["meta",{property:"og:type",content:"article"}],["meta",{property:"og:locale",content:"zh-CN"}],["meta",{property:"og:locale:alternate",content:"en-US"}],["meta",{name:"twitter:card",content:"summary_large_image"}],["meta",{name:"twitter:image:alt",content:"UMajs"}],["meta",{property:"article:author",content:"JiaZeng"}],["meta",{property:"og:restrictions:age",content:"3+"}],["meta",{name:"twitter:creator",content:"UMajs"}]]},excerpt:"",headers:[{level:2,title:"1、插件介绍",slug:"_1、插件介绍",children:[]},{level:2,title:"2、特性",slug:"_2、特性",children:[]},{level:2,title:"3、插件安装",slug:"_3、插件安装",children:[]},{level:2,title:"4、插件配置",slug:"_4、插件配置",children:[]},{level:2,title:"5、web 目录结构",slug:"_5、web-目录结构",children:[]},{level:2,title:"6、创建 react 页面组件",slug:"_6、创建-react-页面组件",children:[]},{level:2,title:"7、脚手架初始化模板工程【推荐】",slug:"_7、脚手架初始化模板工程【推荐】",children:[]},{level:2,title:"8、API",slug:"_8、api",children:[]},{level:2,title:"9、controller中使用",slug:"_9、controller中使用",children:[]},{level:2,title:"10、middleware中使用",slug:"_10、middleware中使用",children:[]},{level:2,title:"11、客户端嵌套路由（react-router）",slug:"_11、客户端嵌套路由-react-router",children:[]},{level:2,title:"12、SEO 和自定义 HTML",slug:"_12、seo-和自定义-html",children:[]},{level:2,title:"13、生产部署",slug:"_13、生产部署",children:[]},{level:2,title:"14、案例",slug:"_14、案例",children:[]},{level:2,title:"15、FAQ",slug:"_15、faq",children:[]}],filePathRelative:"服务端渲染/React-ssr.md",git:{updatedTime:1632135343e3,contributors:[{name:"jiazengp",email:"jiazengp@gmail.com",commits:2},{name:"dazjean",email:"zunyi_zjj@163.com",commits:1}]}}},4110:(s,l)=>{l.Z=(s,l)=>{for(const[n,e]of l)s[n]=e;return s}},9275:(s,l,n)=>{s.exports=n.p+"assets/img/TypeError-Cannot-react-ssr.180432ec.png"}}]);